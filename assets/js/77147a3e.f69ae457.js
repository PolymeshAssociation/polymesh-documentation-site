"use strict";(self.webpackChunkpolymesh_developer_documentation=self.webpackChunkpolymesh_developer_documentation||[]).push([[2298],{1581:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>d,toc:()=>l});var n=t(74848),s=t(28453);const a={title:"Identity",description:"",subsite:"polymesh-docs"},r=void 0,d={id:"primitives/identity",title:"Identity",description:"",source:"@site/polymesh-docs/primitives/identity.mdx",sourceDirName:"primitives",slug:"/primitives/identity",permalink:"/polymesh-documentation-site/polymesh-docs/primitives/identity",draft:!1,unlisted:!1,editUrl:"https://github.com/PolymeshAssociation/polymesh-documentation-site/edit/develop/polymesh-docs/primitives/identity.mdx",tags:[],version:"current",frontMatter:{title:"Identity",description:"",subsite:"polymesh-docs"},sidebar:"defaultSidebar",previous:{title:"Corporate Actions",permalink:"/polymesh-documentation-site/polymesh-docs/primitives/corporate-actions"},next:{title:"MultiSig Walkthrough",permalink:"/polymesh-documentation-site/polymesh-docs/primitives/multisig"}},o={},l=[{value:"Overview",id:"overview",level:2},{value:"Identity Diagram",id:"identity-diagram",level:2},{value:"Assets",id:"assets",level:2},{value:"Claims",id:"claims",level:2},{value:"Authentication and Keys",id:"authentication-and-keys",level:2},{value:"Primary and Secondary Keys",id:"primary-and-secondary-keys",level:2},{value:"Key Types",id:"key-types",level:2},{value:"Public/Private Key Pairs",id:"publicprivate-key-pairs",level:3},{value:"MultiSigs",id:"multisigs",level:3},{value:"Creating MultiSigs",id:"creating-multisigs",level:4},{value:"Submitting Transactions",id:"submitting-transactions",level:4},{value:"Identity Management",id:"identity-management",level:4},{value:"Payment Management",id:"payment-management",level:4},{value:"Smart Contracts",id:"smart-contracts",level:3},{value:"Permissions",id:"permissions",level:2},{value:"Child Identities",id:"child-identities",level:2}];function c(e){const i={a:"a",admonition:"admonition",br:"br",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.h2,{id:"overview",children:"Overview"}),"\n",(0,n.jsx)(i.p,{children:"Identity is at the core of Polymesh."}),"\n",(0,n.jsx)(i.p,{children:"To submit a transaction on-chain, the signing key of that transaction must be associated with an identity or authorising an action on behalf of an identity."}),"\n",(0,n.jsx)(i.p,{children:"Polymesh implements a federated root of trust via permissioned Customer Due Diligence (CDD) service providers. Every transaction in Polymesh is associated with an identity."}),"\n",(0,n.jsx)(i.p,{children:"Identities in Polymesh are controlled via keys. Each identity must have a single primary key and can optionally have additional secondary keys."}),"\n",(0,n.jsx)(i.p,{children:"Identities consist of a collection of claims and assets and are controlled via keys."}),"\n",(0,n.jsx)(i.p,{children:"A user can have multiple identities, which allows them a degree of privacy with respect to their total asset holdings."}),"\n",(0,n.jsxs)(i.p,{children:["Each identity is referenced via a decentralized identifier (DID). A DID is a pseudo-anonymous identifier such as ",(0,n.jsx)(i.code,{children:"0xfc0d2fc058d02c0a89c2cc2ff11726971dd39886a0b80ecfaa80fa3f196d65ce"}),"."]}),"\n",(0,n.jsx)(i.h2,{id:"identity-diagram",children:"Identity Diagram"}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{alt:"Identity Diagram",src:t(24925).A+"",width:"1873",height:"1581"})}),"\n",(0,n.jsx)(i.h2,{id:"assets",children:"Assets"}),"\n",(0,n.jsxs)(i.p,{children:["Assets held by a user are associated with one of their identities. For example, the identity with DID ",(0,n.jsx)(i.code,{children:"0xalice"})," might have a balance of 50 ACME tokens and 30 FOO tokens."]}),"\n",(0,n.jsxs)(i.p,{children:["Assets held by an identity can be organized into ",(0,n.jsx)(i.a,{href:"../portfolios-custody/",children:"portfolios"})," under that identity."]}),"\n",(0,n.jsx)(i.h2,{id:"claims",children:"Claims"}),"\n",(0,n.jsx)(i.p,{children:"An identity can add a claim to another identity and, in turn, hold claims that have been added to it by other identities."}),"\n",(0,n.jsx)(i.p,{children:"To enforce compliance on their assets, asset issuers nominate trusted claim issuers to manage their investors' claims related to their asset compliance rules."}),"\n",(0,n.jsx)(i.h2,{id:"authentication-and-keys",children:"Authentication and Keys"}),"\n",(0,n.jsxs)(i.p,{children:["Identities are created for users by ",(0,n.jsx)(i.a,{href:"../cdd/",children:"CDD service providers"}),"."]}),"\n",(0,n.jsx)(i.p,{children:"Unlike most blockchains, in Polymesh, all on-chain actions are associated both with a signing key (the key used to sign the transaction) and an on-chain identity."}),"\n",(0,n.jsx)(i.p,{children:"To facilitate this connection between identities and signing keys, each on-chain identity is associated with keys that are allowed to sign on its behalf. A given key can only be associated with at most one identity at a time."}),"\n",(0,n.jsx)(i.p,{children:"These keys are known either as primary keys or secondary keys."}),"\n",(0,n.jsx)(i.p,{children:"POLYX, the native token of Polymesh, is held at the key level. Staking and governance, both of which utilize POLYX, are also associated with keys. Although balances are held at the key level, any transaction involving POLYX must be associated with an identity that has a valid CDD claim."}),"\n",(0,n.jsx)(i.h2,{id:"primary-and-secondary-keys",children:"Primary and Secondary Keys"}),"\n",(0,n.jsx)(i.p,{children:"An identity is associated with a primary key on creation by the CDD service provider. This key is typically the public half of a public/private key pair held by the user owning the identity."}),"\n",(0,n.jsx)(i.p,{children:"The primary key of an identity has full permissions to that identity and can add or remove additional secondary keys."}),"\n",(0,n.jsx)(i.p,{children:"A secondary key can also sign transactions on behalf of its identity but can have its permissions limited to only certain actions, portfolios, or assets. It can also be removed by the primary key of its identity at any time."}),"\n",(0,n.jsxs)(i.p,{children:["For more information on our public/private key cryptography, please see:",(0,n.jsx)(i.br,{}),"\n",(0,n.jsx)(i.a,{href:"https://docs.substrate.io/learn/cryptography/",children:"https://docs.substrate.io/learn/cryptography/"})]}),"\n",(0,n.jsx)(i.h2,{id:"key-types",children:"Key Types"}),"\n",(0,n.jsx)(i.p,{children:"There are three types of keys that can be used in Polymesh:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Public/Private key pairs"}),"\n",(0,n.jsx)(i.li,{children:"MultiSigs"}),"\n",(0,n.jsx)(i.li,{children:"Smart Contracts"}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"Polymesh is generally agnostic to the type of key being used and treats each key type consistently (e.g., for permissioning)."}),"\n",(0,n.jsx)(i.h3,{id:"publicprivate-key-pairs",children:"Public/Private Key Pairs"}),"\n",(0,n.jsxs)(i.p,{children:["Polymesh uses public-key cryptography based on the ",(0,n.jsx)(i.a,{href:"https://docs.substrate.io/learn/cryptography/#elliptic-curve",children:"Ed25519 curve"})," and allows keys that use either the Ed25519, SR25519, or ECDSA constructions."]}),"\n",(0,n.jsx)(i.p,{children:"These types of keys can be held on hardware wallets or can be generated offline and stored as paper wallets."}),"\n",(0,n.jsx)(i.h3,{id:"multisigs",children:"MultiSigs"}),"\n",(0,n.jsx)(i.p,{children:"In addition to public/private key pairs, a key can also be a MultiSig account."}),"\n",(0,n.jsxs)(i.p,{children:["For a walkthrough on how to create a new MultiSig, please see the ",(0,n.jsx)(i.a,{href:"../multisig/",children:"MultiSig Walkthrough"}),"."]}),"\n",(0,n.jsxs)(i.p,{children:["A MultiSig is a single key controlled by one or more people. An ",(0,n.jsx)(i.em,{children:"n"})," of ",(0,n.jsx)(i.em,{children:"m"})," MultiSig requires ",(0,n.jsx)(i.em,{children:"n"})," of its ",(0,n.jsx)(i.em,{children:"m"})," members to agree on a transaction before that transaction can be submitted by the MultiSig."]}),"\n",(0,n.jsx)(i.p,{children:"In particular, a MultiSig has the following attributes:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["MultiSig Signers (",(0,n.jsx)(i.code,{children:"multisig::multiSigSigners"}),"): the keys attached to the MultiSig as signers."]}),"\n",(0,n.jsxs)(i.li,{children:["MultiSig Approvals Required (",(0,n.jsx)(i.code,{children:"multisig::multiSigSignsRequired"}),"): the number of MultiSig signers required to approve a transaction."]}),"\n",(0,n.jsxs)(i.li,{children:["Admin Identity (",(0,n.jsx)(i.code,{children:"multisig::adminDid"}),"): the (optional) identity that can manage the MultiSig (e.g., add/remove signers)."]}),"\n",(0,n.jsxs)(i.li,{children:["Paying Identity (",(0,n.jsx)(i.code,{children:"multisig::payingDid"}),"): the (optional) identity that pays for MultiSig transactions (both the proposal and approval, as well as the execution)."]}),"\n",(0,n.jsxs)(i.li,{children:["MultiSig Identity (",(0,n.jsx)(i.code,{children:"identity::keyRecords"})," / ",(0,n.jsx)(i.code,{children:"identity::didRecords"}),"): the (optional) identity to which the MultiSig is attached as a primary or secondary key."]}),"\n"]}),"\n",(0,n.jsx)(i.h4,{id:"creating-multisigs",children:"Creating MultiSigs"}),"\n",(0,n.jsxs)(i.p,{children:["To create a new MultiSig, an existing key (attached to a valid identity) must call ",(0,n.jsx)(i.code,{children:"multisig::createMultisig"}),", specifying the signers and the number of approvals required. It can also optionally specify the permissions that the new MultiSig will be assigned."]}),"\n",(0,n.jsx)(i.p,{children:"The new MultiSig will automatically:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Be added to the caller's identity as a secondary key with appropriate permissions."}),"\n",(0,n.jsxs)(i.li,{children:["Have its ",(0,n.jsx)(i.em,{children:"Paying Identity"})," set to the caller's identity."]}),"\n",(0,n.jsxs)(i.li,{children:["Issue ",(0,n.jsx)(i.code,{children:"AddMultiSigSigner"})," authorizations to each of the specified signers."]}),"\n"]}),"\n",(0,n.jsxs)(i.p,{children:["Once created, the specified signers will need to accept the authorizations issued above before they can interact with the MultiSig. This is done via a call to ",(0,n.jsx)(i.code,{children:"multisig::acceptMultisigSigner"})," by each of the signing keys."]}),"\n",(0,n.jsx)(i.admonition,{type:"note",children:(0,n.jsx)(i.p,{children:"MultiSig signing keys are not permitted to be directly linked to an identity or another MultiSig."})}),"\n",(0,n.jsx)(i.h4,{id:"submitting-transactions",children:"Submitting Transactions"}),"\n",(0,n.jsx)(i.p,{children:"MultiSig signers are not directly associated with an identity but are indirectly associated through their linked MultiSig (which may be attached to an identity as a primary or secondary key)."}),"\n",(0,n.jsx)(i.p,{children:"This means that MultiSig signers cannot send or receive POLYX (since they are not directly associated with an identity) and cannot directly pay for transactions to create or approve proposals."}),"\n",(0,n.jsxs)(i.p,{children:["In order to submit a transaction (excluding transactions related to joining or leaving an identity), the MultiSig must be attached to a valid identity as a primary or secondary key. Either the MultiSig itself or the primary key of its ",(0,n.jsx)(i.em,{children:"Paying Identity"})," must have sufficient funds to pay the transaction fees to create and approve the proposal."]}),"\n",(0,n.jsx)(i.h4,{id:"identity-management",children:"Identity Management"}),"\n",(0,n.jsx)(i.p,{children:"When initially created, a MultiSig is:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Linked to its creating identity as a secondary key."}),"\n",(0,n.jsxs)(i.li,{children:["Has its ",(0,n.jsx)(i.em,{children:"Paying Identity"})," set to the creating identity."]}),"\n",(0,n.jsxs)(i.li,{children:["Has no ",(0,n.jsx)(i.em,{children:"Admin Identity"})," assigned."]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"However, these relationships can be amended."}),"\n",(0,n.jsxs)(i.p,{children:["An ",(0,n.jsx)(i.em,{children:"Admin Identity"})," can be assigned via ",(0,n.jsx)(i.code,{children:"multisig::addAdmin"}),", allowing the ",(0,n.jsx)(i.em,{children:"Admin Identity"})," to add/remove signers from the MultiSig (via ",(0,n.jsx)(i.code,{children:"multisig::addMultisigSignersViaAdmin"}),", ",(0,n.jsx)(i.code,{children:"multisig::removeMultisigSignersViaAdmin"}),") and change the number of approvals needed (via ",(0,n.jsx)(i.code,{children:"multisig::changeSigsRequiredViaAdmin"}),"). To make these changes, the primary key of the ",(0,n.jsx)(i.em,{children:"Admin Identity"})," must call these transactions."]}),"\n",(0,n.jsxs)(i.p,{children:["Additionally, a MultiSig can leave and join new identities, similar to any other key. Changing identity will not update the ",(0,n.jsx)(i.em,{children:"Admin Identity"})," of the MultiSig, this must be amended separately if needed."]}),"\n",(0,n.jsx)(i.p,{children:"To change identity, a MultiSig must:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["Receive a ",(0,n.jsx)(i.code,{children:"JoinIdentity"})," authorization from another identity."]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"Then either:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["Leave its current identity by executing a proposal of ",(0,n.jsx)(i.code,{children:"identity::leaveIdentityAsKey"}),"."]}),"\n",(0,n.jsxs)(i.li,{children:["Create/approve the ",(0,n.jsx)(i.code,{children:"JoinIdentity"})," authorization by a direct call to ",(0,n.jsx)(i.code,{children:"multisig::approveJoinIdentity"})," by the required number of signers."]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"Or:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["Create a proposal for an atomic batch of two transactions using ",(0,n.jsx)(i.code,{children:"utility::batch"}),":","\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["Leave its current identity by executing ",(0,n.jsx)(i.code,{children:"identity::leaveIdentityAsKey"}),"."]}),"\n",(0,n.jsxs)(i.li,{children:["Join its new identity by executing ",(0,n.jsx)(i.code,{children:"identity::joinIdentityAsKey"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(i.p,{children:["The latter approach is recommended, provided the ",(0,n.jsx)(i.code,{children:"JoinIdentity"})," authorization can be issued before the MultiSig leaves its current identity."]}),"\n",(0,n.jsx)(i.h4,{id:"payment-management",children:"Payment Management"}),"\n",(0,n.jsx)(i.p,{children:"MultiSigs can hold funds once they have been attached as a Primary or Secondary key to an identity. If they are removed from the identity, they can continue to hold funds (as per normal external key behavior), but these funds are locked until the key is reattached to a CDD'ed identity."}),"\n",(0,n.jsxs)(i.p,{children:["A MultiSig may opt to pay for its own transactions (to remove the requirement to keep the primary key of its ",(0,n.jsx)(i.em,{children:"Paying Identity"})," funded with POLYX) via ",(0,n.jsx)(i.code,{children:"multisig::removePayer"}),". This can also be done by the ",(0,n.jsx)(i.em,{children:"Paying Identity"})," via ",(0,n.jsx)(i.code,{children:"multisig::removePayerViaPayer"}),"."]}),"\n",(0,n.jsx)(i.admonition,{type:"note",children:(0,n.jsxs)(i.p,{children:["If you remove the ",(0,n.jsx)(i.em,{children:"Paying Identity"})," from a MultiSig, it is not possible to re-add it later."]})}),"\n",(0,n.jsx)(i.h3,{id:"smart-contracts",children:"Smart Contracts"}),"\n",(0,n.jsx)(i.p,{children:"While not conventionally considered key types, Smart Contracts are represented by a public address on Polymesh, similar to other key types. Like other keys, smart contracts must be associated with an identity, either as a primary or a secondary key, to be able to transact on-chain."}),"\n",(0,n.jsx)(i.p,{children:"Smart contracts allow developers to define custom logic, rules, records, and functions. They are vital tools for automating complex processes, facilitating decentralized applications, and expanding the network's capabilities. Like other keys, Smart Contracts can hold POLYX tokens but require interaction with external keys to initiate actions. These contracts seamlessly integrate with Polymesh through chain extensions, granting access to blockchain data and functionalities, thus supporting diverse decentralized applications and use cases."}),"\n",(0,n.jsx)(i.h2,{id:"permissions",children:"Permissions"}),"\n",(0,n.jsx)(i.p,{children:"Permissions in Polymesh operate with three levels of granularity, which can be combined:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.strong,{children:"Assets"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.strong,{children:"Extrinsics"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.strong,{children:"Portfolios"})}),"\n"]}),"\n",(0,n.jsxs)(i.p,{children:["The ",(0,n.jsx)(i.em,{children:"assets"})," granularity allows a key to be limited to interacting with only specific assets held in any portfolio under the identity."]}),"\n",(0,n.jsxs)(i.p,{children:["The ",(0,n.jsx)(i.em,{children:"extrinsics"})," granularity allows a key to be permissioned for specific on-chain actions, such as submitting documentation for an asset or signaling in governance."]}),"\n",(0,n.jsxs)(i.p,{children:["The ",(0,n.jsx)(i.em,{children:"portfolios"})," granularity allows a key to be restricted to interacting with only the assets in specific portfolios under the identity or under the custody/control of that identity."]}),"\n",(0,n.jsx)(i.p,{children:"The access of a particular key is determined by the intersection of these categories. It is possible to grant a key full access to any or all of these categories."}),"\n",(0,n.jsx)(i.p,{children:"Not all on-chain actions are associated with an asset or a portfolio (e.g., staking). For such actions, these permission types are not checked."}),"\n",(0,n.jsx)(i.h2,{id:"child-identities",children:"Child Identities"}),"\n",(0,n.jsxs)(i.p,{children:["An identity, as described above, is always created by a ",(0,n.jsx)(i.a,{href:"../cdd/",children:"CDD service provider"}),"."]}),"\n",(0,n.jsx)(i.p,{children:"This process involves two steps for CDD providers:"}),"\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsx)(i.li,{children:"Creating an on-chain identity for the user, referenced via the returned DID."}),"\n",(0,n.jsx)(i.li,{children:"Issuing a CDD claim to the new on-chain identity."}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"When a user submits a transaction to the network, the process is as follows:"}),"\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsx)(i.li,{children:"The associated identity is determined by identifying which identity the key signing the transaction is linked to (this can be at most one identity)."}),"\n",(0,n.jsx)(i.li,{children:"It is then checked whether the associated identity has a valid CDD claim (issued by a current CDD provider and not expired)."}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"However, for some use cases, it may be beneficial for existing identities created via CDD providers to create additional child identities unilaterally (i.e., without the involvement of a CDD provider)."}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{alt:"Child Identity Diagram",src:t(96136).A+"",width:"1320",height:"1650"})}),"\n",(0,n.jsx)(i.p,{children:"Possible use cases include:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Isolating a smart contract from the deployer's identity to protect user funds held or controlled by the smart contract."}),"\n",(0,n.jsx)(i.li,{children:'Adding an extra layer of protection, with child identities functioning as "hot wallets" and the parent identity as a "cold wallet." Since assets are held at the identity level, it can be useful to have distinct hot/cold identities.'}),"\n",(0,n.jsx)(i.li,{children:"Organizing an entity into an internal structure (e.g., one child identity for each department or sub-company)."}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:'Polymesh allows any "parent" identity (an identity created via a CDD provider) to create additional child identities. These child identities inherit their CDD claim from the parent, rather than having an explicit CDD claim issued by a CDD provider attached to the child DID.'}),"\n",(0,n.jsxs)(i.p,{children:["To create a child identity, there is the ",(0,n.jsx)(i.code,{children:"identity::create_child_identity"})," extrinsic, along with corresponding SDK and RESTful API methods."]}),"\n",(0,n.jsx)(i.p,{children:"Once created, a child identity is assigned its own unique DID and can hold claims and assets like any other identity. However, a child identity cannot create additional child identities underneath it (i.e., recursion is not allowed). A child identity only inherits its CDD status from its parent identity, any other claims related to compliance must be held directly by the child identity."}),"\n",(0,n.jsx)(i.p,{children:"If desired, a child identity can be unlinked from its parent. In this case, it will no longer inherit its CDD status from its parent's claim and will need to obtain its own CDD claim from a CDD provider."})]})}function h(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},24925:(e,i,t)=>{t.d(i,{A:()=>n});const n=t.p+"assets/images/Identity-09ca6ccde69eb6c5e5b6382524883a17.png"},96136:(e,i,t)=>{t.d(i,{A:()=>n});const n=t.p+"assets/images/child_identities-859d5ce5cef29c8160a9ff341fc638dd.png"},28453:(e,i,t)=>{t.d(i,{R:()=>r,x:()=>d});var n=t(96540);const s={},a=n.createContext(s);function r(e){const i=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function d(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),n.createElement(a.Provider,{value:i},e.children)}}}]);