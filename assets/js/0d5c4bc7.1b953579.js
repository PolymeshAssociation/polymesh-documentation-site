"use strict";(self.webpackChunkpolymesh_developer_documentation=self.webpackChunkpolymesh_developer_documentation||[]).push([[31],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>u});var o=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(e,t){if(null==e)return{};var a,o,n=function(e,t){if(null==e)return{};var a,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)a=i[o],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)a=i[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=o.createContext({}),p=function(e){var t=o.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},c=function(e){var t=p(e.components);return o.createElement(l.Provider,{value:t},e.children)},m="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var a=e.components,n=e.mdxType,i=e.originalType,l=e.parentName,c=r(e,["components","mdxType","originalType","parentName"]),m=p(a),d=n,u=m["".concat(l,".").concat(d)]||m[d]||h[d]||i;return a?o.createElement(u,s(s({ref:t},c),{},{components:a})):o.createElement(u,s({ref:t},c))}));function u(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=a.length,s=new Array(i);s[0]=d;var r={};for(var l in t)hasOwnProperty.call(t,l)&&(r[l]=t[l]);r.originalType=e,r[m]="string"==typeof e?e:n,s[1]=r;for(var p=2;p<i;p++)s[p]=a[p];return o.createElement.apply(null,s)}return o.createElement.apply(null,a)}d.displayName="MDXCreateElement"},94935:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>m,frontMatter:()=>i,metadata:()=>r,toc:()=>p});var o=a(87462),n=(a(67294),a(3905));const i={sidebar_position:5,title:"KYC Example App",description:"A walk through the example app",slug:"/kyc/example-app/"},s=void 0,r={unversionedId:"kyc/kyc-app",id:"kyc/kyc-app",title:"KYC Example App",description:"A walk through the example app",source:"@site/docs/07-kyc/kyc-app.mdx",sourceDirName:"07-kyc",slug:"/kyc/example-app/",permalink:"/docs/kyc/example-app/",draft:!1,editUrl:"https://github.com/PolymeshAssociation/polymesh-documentation-site/edit/develop/docs/07-kyc/kyc-app.mdx",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5,title:"KYC Example App",description:"A walk through the example app",slug:"/kyc/example-app/"},sidebar:"defaultSidebar",previous:{title:"KYC with the SDK",permalink:"/docs/kyc/kyc-sdk/"},next:{title:"CDD with the SDK",permalink:"/docs/kyc/cdd-sdk/"}},l={},p=[{value:"Pre Polymesh",id:"pre-polymesh",level:2},{value:"The setup",id:"the-setup",level:3},{value:"How it looks",id:"how-it-looks",level:3},{value:"Post Polymesh",id:"post-polymesh",level:2},{value:"The setup",id:"the-setup-1",level:3},{value:"How it looks",id:"how-it-looks-1",level:3},{value:"Conclusion",id:"conclusion",level:2}],c={toc:p};function m(e){let{components:t,...i}=e;return(0,n.kt)("wrapper",(0,o.Z)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"After learning about the SDK elements that work for KYC, let's have a look at a simplified example of what it would take to integrate an existing system with Polymesh. For this example, we will consider the case of EzKyc, a company that provides KYC services. Actually, EzKyc provides a very simple service, it provides an opinion about the validity of the documents provided by the customer to justify as being under a certain jurisdiction. In the same way we did for the settlement example app, to simplify, and not overburden the reader with elements not relevant to learning about Polymesh, we did not add any authentication nor authorisation mechanism."),(0,n.kt)("h2",{id:"pre-polymesh"},"Pre Polymesh"),(0,n.kt)("p",null,"Let's describe the EzKyc system before we integrate it with Polymesh."),(0,n.kt)("h3",{id:"the-setup"},"The setup"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"2 pages")," are served:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"index.tsx"),", ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/PolymeshAssociation/technical-content-examples/blob/a9ca81ab05062f70e382fab0dae78716207aa698/kyc_provider/pages/index.tsx"},"a page for the KYC customer")," to enter their information."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"manager.tsx"),", ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/PolymeshAssociation/technical-content-examples/blob/a9ca81ab05062f70e382fab0dae78716207aa698/kyc_provider/pages/manager.tsx"},"a page for someone at EzKyc")," to review a customer and make a decision.")),(0,n.kt)("p",null,"There is a rudimentary server that exposes a ",(0,n.kt)("strong",{parentName:"p"},"simple API"),":"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"api/kycCustomer/[id].ts"),", ",(0,n.kt)("em",{parentName:"li"},"the")," ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/PolymeshAssociation/technical-content-examples/blob/a9ca81ab05062f70e382fab0dae78716207aa698/kyc_provider/pages/api/kycCustomer/%5Bid%5D.ts"},"end point")," to get, put and patch customer information. Following the absence of login, it is used by both the customer and EzKyc.")),(0,n.kt)("p",null,"On the server, a single ",(0,n.kt)("strong",{parentName:"p"},"service")," is running:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"customerDbFs.ts"),", a ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/PolymeshAssociation/technical-content-examples/blob/a9ca81ab05062f70e382fab0dae78716207aa698/kyc_provider/src/customerDbFs.ts"},"service")," to customers' information on disk in a large JSON file, instead of a proper database, for simplicity's stake.")),(0,n.kt)("p",null,"The system describes its ",(0,n.kt)("strong",{parentName:"p"},"information")," in terms of:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"CustomerInfo"),", ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/PolymeshAssociation/technical-content-examples/blob/a9ca81ab05062f70e382fab0dae78716207aa698/kyc_provider/src/customerInfo.ts"},"an object")," that collects both the customer-provided information and EzKyc's decision.")),(0,n.kt)("h3",{id:"how-it-looks"},"How it looks"),(0,n.kt)("p",null,"When a customer of EzKyc ",(0,n.kt)("em",{parentName:"p"},"logs in")," on ",(0,n.kt)("inlineCode",{parentName:"p"},"/index"),", using their customer id, they enter all their relevant information. Of course, since there is no authentication in this simplified example, anyone can use any id:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Customer information",src:a(78385).Z,width:"422",height:"807"})),(0,n.kt)("p",null,"At a later stage, on ",(0,n.kt)("inlineCode",{parentName:"p"},"/manager"),", someone from EzKyc will review the information and mark the information as accepted or rejected depending on the case:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Customer approved",src:a(30474).Z,width:"500",height:"922"})),(0,n.kt)("p",null,"Back to the customer view, when the information has been accepted, it is no longer possible to modify it:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Information locked",src:a(85719).Z,width:"426",height:"808"})),(0,n.kt)("h2",{id:"post-polymesh"},"Post Polymesh"),(0,n.kt)("p",null,"Time to integrate with Polymesh. What needs to be done?"),(0,n.kt)("h3",{id:"the-setup-1"},"The setup"),(0,n.kt)("p",null,"Let's go from the bottom up."),(0,n.kt)("p",null,"On the ",(0,n.kt)("strong",{parentName:"p"},"configuration"),":"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Some ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/PolymeshAssociation/technical-content-examples/blob/109e888163eab902b9e1e184ab81af7dab886f66/kyc_provider/next.config.js"},"basic information")," is added about EzKyc server's Polymesh account mnemonic.")),(0,n.kt)("p",null,"On ",(0,n.kt)("strong",{parentName:"p"},"objects"),":"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"in ",(0,n.kt)("inlineCode",{parentName:"li"},"CustomerInfo"),", we ","[add information]",(0,n.kt)("a",{parentName:"li",href:"https://github.com/PolymeshAssociation/technical-content-examples/blob/109e888163eab902b9e1e184ab81af7dab886f66/kyc_provider/src/customerInfo.ts#L17-L18"},"https://github.com/PolymeshAssociation/technical-content-examples/blob/109e888163eab902b9e1e184ab81af7dab886f66/kyc_provider/src/customerInfo.ts#L17-L18"),") about the customer's Polymesh information. We also use the ",(0,n.kt)("inlineCode",{parentName:"li"},"CountryCode")," `enum`` provided by the Polymesh SDK.")),(0,n.kt)("p",null,"On ",(0,n.kt)("strong",{parentName:"p"},"services"),":"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"customerDbFs.ts")," does not have any change. There could have been a check on the Polymesh id of the customer.")),(0,n.kt)("p",null,"On the ",(0,n.kt)("strong",{parentName:"p"},"API")," end points:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"api/kycCustomer/[id].ts")," ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/PolymeshAssociation/technical-content-examples/blob/109e888163eab902b9e1e184ab81af7dab886f66/kyc_provider/pages/api/kycCustomer/%5Bid%5D.ts"},"publishes")," an attestation when the customer is validated by EzKyc and the customer has a Polymesh id, whichever happens last."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"api/kycProvider.ts")," ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/PolymeshAssociation/technical-content-examples/blob/109e888163eab902b9e1e184ab81af7dab886f66/kyc_provider/pages/api/kycProvider.ts"},"exposes")," the Polymesh DID of EzKyc so the customer can check on their own whether the attestation has been published.")),(0,n.kt)("p",null,"On ",(0,n.kt)("strong",{parentName:"p"},"pages"),":"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"We add a ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/PolymeshAssociation/technical-content-examples/blob/109e888163eab902b9e1e184ab81af7dab886f66/kyc_provider/src/ui-helpers.ts"},"helper")," to get the Polywallet."),(0,n.kt)("li",{parentName:"ul"},"On the ",(0,n.kt)("inlineCode",{parentName:"li"},"index.tsx")," customer page, we add a ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/PolymeshAssociation/technical-content-examples/blob/109e888163eab902b9e1e184ab81af7dab886f66/kyc_provider/pages/index.tsx#L259"},"Polymesh id field"),"."),(0,n.kt)("li",{parentName:"ul"},"We also make it possible to ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/PolymeshAssociation/technical-content-examples/blob/109e888163eab902b9e1e184ab81af7dab886f66/kyc_provider/pages/index.tsx#L132-L136"},"pick it")," directly from the Polymesh Wallet."),(0,n.kt)("li",{parentName:"ul"},"We add a way to ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/PolymeshAssociation/technical-content-examples/blob/109e888163eab902b9e1e184ab81af7dab886f66/kyc_provider/pages/index.tsx#L40-L42"},"collect EzKyc's DID"),"."),(0,n.kt)("li",{parentName:"ul"},"We add a place to ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/PolymeshAssociation/technical-content-examples/blob/109e888163eab902b9e1e184ab81af7dab886f66/kyc_provider/pages/index.tsx#L270-L308"},"list the existing attestations")," published by EzKyc for this account."),(0,n.kt)("li",{parentName:"ul"},"And of course a way to ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/PolymeshAssociation/technical-content-examples/blob/109e888163eab902b9e1e184ab81af7dab886f66/kyc_provider/pages/index.tsx#L163-L170"},"retrieve")," said attestations."),(0,n.kt)("li",{parentName:"ul"},"On the ",(0,n.kt)("inlineCode",{parentName:"li"},"manager.tsx")," page, there only needs to have a place to ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/PolymeshAssociation/technical-content-examples/blob/109e888163eab902b9e1e184ab81af7dab886f66/kyc_provider/pages/manager.tsx#L137-L140"},"display the customer's Polymesh id"),", the attestion is published from the server anyway.")),(0,n.kt)("h3",{id:"how-it-looks-1"},"How it looks"),(0,n.kt)("p",null,"There is more information to provide when submitting a buy order, and after the customer sends their Polymesh id, the attestation is published:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Attestation present",src:a(99019).Z,width:"970",height:"1354"})),(0,n.kt)("p",null,"From EzKyc point of view, the only extra is the customer's Polymesh id:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Result EzKyc",src:a(6727).Z,width:"503",height:"958"})),(0,n.kt)("h2",{id:"conclusion"},"Conclusion"),(0,n.kt)("p",null,"That's what it takes."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Make your server able to access Polymesh."),(0,n.kt)("li",{parentName:"ul"},"Store a bit more information in your database."),(0,n.kt)("li",{parentName:"ul"},"Make your server able to publish attestions when relevant."),(0,n.kt)("li",{parentName:"ul"},"Make your Web pages a bit more decentralised by having them fetch themselves the attestation.")))}m.isMDXComponent=!0},85719:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/app-info-locked-37ce73149413a8ed39347dee3a5d6849.png"},99019:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/app-info-post-1d4128704f8a3355195941c8286275eb.png"},78385:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/app-info-pre-addcb6ed9b4c8999c90b38382dcfa7ad.png"},6727:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/app-result-post-4cb9118217cc0063bd3d7a6cd81f7ed8.png"},30474:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/app-result-pre-0df2b26055cee6eb1c367b64da23e802.png"}}]);