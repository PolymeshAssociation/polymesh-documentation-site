"use strict";(self.webpackChunkpolymesh_developer_documentation=self.webpackChunkpolymesh_developer_documentation||[]).push([[92228],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var i=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},l=Object.keys(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=i.createContext({}),d=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=d(e.components);return i.createElement(s.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},m=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,p=r(e,["components","mdxType","originalType","parentName"]),c=d(n),m=a,h=c["".concat(s,".").concat(m)]||c[m]||u[m]||l;return n?i.createElement(h,o(o({ref:t},p),{},{components:n})):i.createElement(h,o({ref:t},p))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,o=new Array(l);o[0]=m;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r[c]="string"==typeof e?e:a,o[1]=r;for(var d=2;d<l;d++)o[d]=n[d];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}m.displayName="MDXCreateElement"},76255:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>l,metadata:()=>r,toc:()=>d});var i=n(87462),a=(n(67294),n(3905));const l={sidebar_position:2,title:"Non-Fungible Tokens",description:"",subsite:"polymesh-docs"},o="Non-Fungible Tokens",r={unversionedId:"primitives/nfts",id:"primitives/nfts",title:"Non-Fungible Tokens",description:"",source:"@site/polymesh-docs/primitives/nfts.mdx",sourceDirName:"primitives",slug:"/primitives/nfts",permalink:"/polymesh-documentation-site/polymesh-docs/primitives/nfts",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,title:"Non-Fungible Tokens",description:"",subsite:"polymesh-docs"},sidebar:"defaultSidebar",previous:{title:"Fungible Assets",permalink:"/polymesh-documentation-site/polymesh-docs/primitives/assets"},next:{title:"Authorisations",permalink:"/polymesh-documentation-site/polymesh-docs/primitives/authorisations"}},s={},d=[{value:"Overview",id:"overview",level:2},{value:"NFT Collection",id:"nft-collection",level:2},{value:"Creating an NFT Collection",id:"creating-an-nft-collection",level:3},{value:"Issuing an NFT",id:"issuing-an-nft",level:3},{value:"Redeeming an NFT",id:"redeeming-an-nft",level:3},{value:"NFTs and the Settlement pallet",id:"nfts-and-the-settlement-pallet",level:2},{value:"Metadata Schema",id:"metadata-schema",level:2},{value:"Token URI",id:"token-uri",level:3},{value:"Image URI",id:"image-uri",level:3}],p={toc:d};function c(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,i.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"non-fungible-tokens"},"Non-Fungible Tokens"),(0,a.kt)("h2",{id:"overview"},"Overview"),(0,a.kt)("p",null,"The Non-Fungible Token (NFT) pallet extends the Asset pallet allowing users to create NFT collections, issue unique tokens and redeem (i.e. burn) existing non-fungible tokens. The documentation for the NFT crate can be found ",(0,a.kt)("a",{parentName:"p",href:"https://docs.polymesh.live/pallet_nft/index.html"},"here"),"."),(0,a.kt)("h2",{id:"nft-collection"},"NFT Collection"),(0,a.kt)("p",null,"All non-fungible tokens are linked to a unique NFT collection, which is tied to an ",(0,a.kt)("a",{parentName:"p",href:"https://developers.polymesh.network/polymesh-docs/primitives/assets/#asset-creation"},"Asset")," and user-defined metadata."),(0,a.kt)("h3",{id:"creating-an-nft-collection"},"Creating an NFT Collection"),(0,a.kt)("p",null,"In order to successfully create an NFT collection, the dispatchable ",(0,a.kt)("a",{parentName:"p",href:"https://docs.polymesh.live/pallet_nft/struct.Module.html#arguments"},(0,a.kt)("inlineCode",{parentName:"a"},"create_nft_collection"))," must be called, and the following conditions must hold:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"If the asset already exists, it must be of type ",(0,a.kt)("inlineCode",{parentName:"li"},"NonFungible")," and the caller must have the proper permission for the asset. If the asset does not already exist, the ",(0,a.kt)("inlineCode",{parentName:"li"},"create_nft_collection")," dispatchable will also create one non-fungible asset using the values passed as ",(0,a.kt)("inlineCode",{parentName:"li"},"ticker")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"nft_type"),";"),(0,a.kt)("li",{parentName:"ul"},"This must be the first collection associated to the given ",(0,a.kt)("inlineCode",{parentName:"li"},"ticker")," (i.e. only one collection per ticker is allowed);"),(0,a.kt)("li",{parentName:"ul"},"The number of metadata keys associated to the collection must be less or equal to ",(0,a.kt)("a",{parentName:"li",href:"https://docs.polymesh.live/pallet_nft/trait.Config.html#associatedtype.MaxNumberOfCollectionKeys"},"MaxNumberOfCollectionKeys"),";"),(0,a.kt)("li",{parentName:"ul"},"All metadata keys must be registered prior to the creation of the collection. This implies that when using local metadata keys, one must call ",(0,a.kt)("inlineCode",{parentName:"li"},"create_asset")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"register_asset_metadata_local_type")," before calling ",(0,a.kt)("inlineCode",{parentName:"li"},"create_nft_collection"),";")),(0,a.kt)("p",null,"Once the dispatchable succeeds, a unique ID is tied to the NFT collection."),(0,a.kt)("h3",{id:"issuing-an-nft"},"Issuing an NFT"),(0,a.kt)("p",null,"After creating the collection, tokens can be issued with the ",(0,a.kt)("a",{parentName:"p",href:"https://docs.polymesh.live/pallet_nft/struct.Module.html#arguments-1"},(0,a.kt)("inlineCode",{parentName:"a"},"issue_nft"))," extrinsic. For successfully issuing an NFT, the following conditions must hold:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"An NFT collection associated with ",(0,a.kt)("inlineCode",{parentName:"li"},"ticker")," must exist;"),(0,a.kt)("li",{parentName:"ul"},"The caller must have the proper permission for the ",(0,a.kt)("inlineCode",{parentName:"li"},"Asset"),";"),(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("inlineCode",{parentName:"li"},"portfolio_kind")," of the caller must be valid;"),(0,a.kt)("li",{parentName:"ul"},"All metadata keys specified in the NFT collection have a value set when issuing the token. Attempting to issue a token with metadata keys not defined in the collection will also fail;")),(0,a.kt)("p",null,"Once the dispatchable succeeds, a unique non-fungible token is linked to the specified portfolio."),(0,a.kt)("h3",{id:"redeeming-an-nft"},"Redeeming an NFT"),(0,a.kt)("p",null,"A non-fungible token can be redeemed by calling the ",(0,a.kt)("a",{parentName:"p",href:"https://docs.polymesh.live/pallet_nft/struct.Module.html#arguments-2"},(0,a.kt)("inlineCode",{parentName:"a"},"redeem_nft"))," dispatchable.For successfully redeeming an NFT, the following conditions must hold:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"An NFT collection associated with ",(0,a.kt)("inlineCode",{parentName:"li"},"ticker")," must exist;"),(0,a.kt)("li",{parentName:"ul"},"The caller must have the proper permission for the ",(0,a.kt)("inlineCode",{parentName:"li"},"Asset"),";"),(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("inlineCode",{parentName:"li"},"nft_id")," of the token must exist in the caller's portfolio;")),(0,a.kt)("p",null,"Once the dispatchable succeeds, the non-fungible token will no longer be linked to caller's portfolio."),(0,a.kt)("h2",{id:"nfts-and-the-settlement-pallet"},"NFTs and the Settlement pallet"),(0,a.kt)("p",null,"Polymesh's ",(0,a.kt)("a",{parentName:"p",href:"https://developers.polymesh.network/polymesh-docs/primitives/settlement/#overview"},"Settlement")," engine fully supports NFTs, and transferring of non-fungible tokens go through the same process as fungible assets. This means that all compliance rules defined for the underlying asset must be respected for a successful transfer of an NFT."),(0,a.kt)("h2",{id:"metadata-schema"},"Metadata Schema"),(0,a.kt)("p",null,"NFTs can be associated with metadata at both the collection and individual NFT granularity. Each NFT collection can define local metadata keys to use for their collection."),(0,a.kt)("p",null,"There are also 4 globally defined metadata keys, which are intended to be used in a standardised way, to allow third-party dApps etc. to easily process metadata associated with NFTs."),(0,a.kt)("p",null,"Unlike other chains and standards (e.g. EIP-721) Polymesh encourages you to store metadata directly on-chain - this has the benefit of transparency, reducing dependencies on external systems such as IPFS, and allowing the metadata to be referenced by smart contract business logic."),(0,a.kt)("p",null,"However, in some cases it may still be preferable to store some metadata off-chain - for compatability purposes or otherwise."),(0,a.kt)("p",null,"The below two standard approaches to specifying a Token URI and an Image URI are optional, but encouraged if you are storing this data off-chain."),(0,a.kt)("h3",{id:"token-uri"},"Token URI"),(0,a.kt)("p",null,"The Token URI of an NFT is intended to point towards an off-chain URI containing a JSON blob defining some metadata of the NFT."),(0,a.kt)("p",null,"The Token URI can be specified in various ways:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"via the global metadata key ",(0,a.kt)("inlineCode",{parentName:"li"},"tokenUri")," defined for an individual NFT"),(0,a.kt)("li",{parentName:"ul"},"via the global metadata key ",(0,a.kt)("inlineCode",{parentName:"li"},"baseTokenUri")," defined for the whole NFT collection")),(0,a.kt)("p",null,"In both cases, the metadata value can include ",(0,a.kt)("inlineCode",{parentName:"p"},"{tokenId}")," which will be substituted by a client with the corresponding ",(0,a.kt)("inlineCode",{parentName:"p"},"tokenId")," of the individual NFT being referenced."),(0,a.kt)("p",null,"The full process to determine the Token URI of an individual NFT is:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"if the individual NFT has a ",(0,a.kt)("inlineCode",{parentName:"li"},"tokenUri")," value set, return this"),(0,a.kt)("li",{parentName:"ul"},"else if the NFT collection has a ",(0,a.kt)("inlineCode",{parentName:"li"},"baseTokenUri")," value set then:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"if the ",(0,a.kt)("inlineCode",{parentName:"li"},"baseTokenUri")," does not already include ",(0,a.kt)("inlineCode",{parentName:"li"},"{tokenId}")," append ",(0,a.kt)("inlineCode",{parentName:"li"},"/{tokenId}")," (e.g. the resolved URI is {baseTokenUri}/{tokenId})"),(0,a.kt)("li",{parentName:"ul"},"substitute any ",(0,a.kt)("inlineCode",{parentName:"li"},"{tokenId}")," references with the underlying ",(0,a.kt)("inlineCode",{parentName:"li"},"tokenId")," of the individual NFT, return this")))),(0,a.kt)("p",null,"The JSON blob referenced by an individual NFTs Token URI should confirm to the JSON schema below:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "title": "Token Metadata",\n  "type": "object",\n  "properties": {\n    "name": {\n      "type": "string",\n      "description": "Identifies the asset which this token represents"\n    },\n    "description": {\n      "type": "string",\n      "description": "Describes the asset which this token represents"\n    },\n    "properties": {\n      "type": "object",\n      "description": "Arbitrary properties. Values may be strings, numbers, object or arrays."\n    }\n  }\n}\n')),(0,a.kt)("h3",{id:"image-uri"},"Image URI"),(0,a.kt)("p",null,"As well as being able to specify off-chain metadata via a JSON blob, you can also directly specify the image associated with an individual NFT."),(0,a.kt)("p",null,"The Image URI of an NFT is intended to point towards an off-chain URI containing image data for the individual NFT."),(0,a.kt)("p",null,"The Image URI can be specified in various ways:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"via the global metadata key ",(0,a.kt)("inlineCode",{parentName:"li"},"imageUri")," defined for an individual NFT"),(0,a.kt)("li",{parentName:"ul"},"via the global metadata key ",(0,a.kt)("inlineCode",{parentName:"li"},"baseImageUri")," defined for the whole NFT collection")),(0,a.kt)("p",null,"In both cases, the metadata value can include ",(0,a.kt)("inlineCode",{parentName:"p"},"{tokenId}")," which will be substituted by a client with the corresponding ",(0,a.kt)("inlineCode",{parentName:"p"},"tokenId")," of the individual NFT being referenced."),(0,a.kt)("p",null,"The full process to determine the Image URI of an individual NFT is:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"if the individual NFT has a ",(0,a.kt)("inlineCode",{parentName:"li"},"imageUri")," value set, return this"),(0,a.kt)("li",{parentName:"ul"},"else if the NFT collection has a ",(0,a.kt)("inlineCode",{parentName:"li"},"baseImageUri")," value set then:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"if the ",(0,a.kt)("inlineCode",{parentName:"li"},"baseImageUri")," does not already include ",(0,a.kt)("inlineCode",{parentName:"li"},"{tokenId}")," append ",(0,a.kt)("inlineCode",{parentName:"li"},"/{tokenId}")," (e.g. the resolved URI is {baseImageUri}/{tokenId})"),(0,a.kt)("li",{parentName:"ul"},"substitute any ",(0,a.kt)("inlineCode",{parentName:"li"},"{tokenId}")," references with the underlying ",(0,a.kt)("inlineCode",{parentName:"li"},"tokenId")," of the individual NFT, return this")))),(0,a.kt)("p",null,"This logic is equivalent to the above logic for ",(0,a.kt)("a",{parentName:"p",href:"#token-uri"},"Token URI"),"."),(0,a.kt)("admonition",{title:"Notes",type:"note"},(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"When using ",(0,a.kt)("inlineCode",{parentName:"p"},"baseImageUri"),", it is highly recommended to include ",(0,a.kt)("inlineCode",{parentName:"p"},"{tokenId}")," to ensure a file extension is included in the URI. Without the file extension, there may be ambiguity in how the image is handled, which can lead to display issues or incorrect handling by applications reading the file.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"The above specification allows an image to be specified either via the ",(0,a.kt)("a",{parentName:"p",href:"#image-uri"},"Image URI")," or through an ",(0,a.kt)("inlineCode",{parentName:"p"},"image")," tag in the JSON data linked by the ",(0,a.kt)("a",{parentName:"p",href:"#token-uri"},"Token URI"),". The recommended approach is to first look for a dedicated ",(0,a.kt)("a",{parentName:"p",href:"#image-uri"},"Image URI")," and then, if not found, fall back to the image tag in the data stored at the ",(0,a.kt)("a",{parentName:"p",href:"#token-uri"},"Token URI"),".")))))}c.isMDXComponent=!0}}]);