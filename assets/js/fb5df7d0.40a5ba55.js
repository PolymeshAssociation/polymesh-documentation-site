"use strict";(self.webpackChunkpolymesh_developer_documentation=self.webpackChunkpolymesh_developer_documentation||[]).push([[97697],{44416:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"core-concepts/identity/identity-index","title":"Identity","description":"Identity Management on Polymesh","source":"@site/docs/200-core-concepts/030-identity/index.mdx","sourceDirName":"200-core-concepts/030-identity","slug":"/identity","permalink":"/polymesh-documentation-site/identity","draft":false,"unlisted":false,"editUrl":"https://github.com/PolymeshAssociation/polymesh-documentation-site/edit/develop/docs/200-core-concepts/030-identity/index.mdx","tags":[{"inline":true,"label":"identity","permalink":"/polymesh-documentation-site/tags/identity"},{"inline":true,"label":"management","permalink":"/polymesh-documentation-site/tags/management"}],"version":"current","frontMatter":{"title":"Identity","description":"Identity Management on Polymesh","id":"identity-index","slug":"/identity","sidebar_label":"Identity","tags":["identity","management"]},"sidebar":"docs","previous":{"title":"Tokenomics","permalink":"/polymesh-documentation-site/polyx/tokenomics"},"next":{"title":"Identity Verification","permalink":"/polymesh-documentation-site/identity/verification"}}');var s=t(74848),a=t(28453);const r={title:"Identity",description:"Identity Management on Polymesh",id:"identity-index",slug:"/identity",sidebar_label:"Identity",tags:["identity","management"]},d=void 0,o={},l=[{value:"Overview",id:"overview",level:2},{value:"Identity Diagram",id:"identity-diagram",level:2},{value:"Assets",id:"assets",level:2},{value:"Claims",id:"claims",level:2},{value:"Identity and Key Authentication with CDD Verification",id:"identity-and-key-authentication-with-cdd-verification",level:2},{value:"Primary and Secondary Keys",id:"primary-and-secondary-keys",level:2},{value:"Key Types",id:"key-types",level:2},{value:"Public/Private Key Pairs",id:"publicprivate-key-pairs",level:3},{value:"MultiSigs",id:"multisigs",level:3},{value:"Creating MultiSigs",id:"creating-multisigs",level:4},{value:"Submitting Transactions",id:"submitting-transactions",level:4},{value:"Identity Management",id:"identity-management",level:4},{value:"Payment Management",id:"payment-management",level:4},{value:"Smart Contracts",id:"smart-contracts",level:3},{value:"Permissions",id:"permissions",level:2},{value:"Child Identities",id:"child-identities",level:2}];function c(e){const i={a:"a",admonition:"admonition",br:"br",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(i.p,{children:"Identity is at the core of Polymesh."}),"\n",(0,s.jsx)(i.p,{children:"To submit a transaction on-chain, the signing key must either be associated with an identity or authorized to act on behalf of one."}),"\n",(0,s.jsx)(i.p,{children:"Polymesh uses a federated root of trust via permissioned Customer Due Diligence (CDD) service providers, so every transaction is associated with an identity."}),"\n",(0,s.jsx)(i.p,{children:"Identities in Polymesh are controlled by keys. Each identity has a single primary key and may have additional secondary keys."}),"\n",(0,s.jsx)(i.p,{children:"Asset holdings, claims and permissions are associated with identities. Users may have multiple identities, allowing for a degree of privacy in asset holdings."}),"\n",(0,s.jsxs)(i.p,{children:["Each identity is referenced by a decentralized identifier (DID), a pseudo-anonymous identifier like ",(0,s.jsx)(i.code,{children:"0xfc0d2fc058d02c0a89c2cc2ff11726971dd39886a0b80ecfaa80fa3f196d65ce"}),"."]}),"\n",(0,s.jsx)(i.h2,{id:"identity-diagram",children:"Identity Diagram"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{alt:"Identity Diagram",src:t(63412).A+"",width:"1873",height:"1581"})}),"\n",(0,s.jsx)(i.h2,{id:"assets",children:"Assets"}),"\n",(0,s.jsxs)(i.p,{children:["Assets held by a user are associated with one of their identities. For example, the identity with DID ",(0,s.jsx)(i.code,{children:"0xalice"})," might hold 50 ACME tokens and 30 FOO tokens."]}),"\n",(0,s.jsxs)(i.p,{children:["Assets held by an identity can be organized into ",(0,s.jsx)(i.a,{href:"/portfolios/custody/",children:"portfolios"}),"."]}),"\n",(0,s.jsx)(i.h2,{id:"claims",children:"Claims"}),"\n",(0,s.jsx)(i.p,{children:"An identity can add claims to other identities and hold claims added to it by others."}),"\n",(0,s.jsx)(i.p,{children:"To enforce asset compliance, issuers nominate trusted claim issuers to manage compliance-related claims for their investors."}),"\n",(0,s.jsx)(i.h2,{id:"identity-and-key-authentication-with-cdd-verification",children:"Identity and Key Authentication with CDD Verification"}),"\n",(0,s.jsxs)(i.p,{children:["In Polymesh, all on-chain actions are associated with both a signing key and an identity, which is created by a ",(0,s.jsx)(i.a,{href:"/identity/verification/",children:"CDD service provider"}),". Each identity has associated keys, categorized as primary or secondary, that can sign on its behalf, and each key is linked to only one identity.\nTo enable on-chain transactions, an identity must be linked to a CDD claim, always issued by a CDD provider through a two-step process:"]}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsx)(i.li,{children:"Creating an on-chain identity for the user, referenced by a DID."}),"\n",(0,s.jsx)(i.li,{children:"Issuing a CDD claim to this new identity.\nWhen a user submits a transaction, the network first identifies the signing key's associated identity and then checks that this identity has a valid CDD claim (issued by a current CDD provider and not expired). Both an associated DID and a valid CDD claim are required for the transaction to be accepted. (Excluding transactions to join an identity)\nPOLYX, Polymesh's native token, is held at the key level. Staking and governance activities that use POLYX are also linked to keys. POLYX transaction also requires an identity with a valid CDD claim to be executed."}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"primary-and-secondary-keys",children:"Primary and Secondary Keys"}),"\n",(0,s.jsx)(i.p,{children:"A users key is associated with a DID as its primary key when registered by the CDD provider and serves as its controlling key. The primary key has full permissions for that identity including adding or removing secondary keys."}),"\n",(0,s.jsx)(i.p,{children:"Secondary keys can also sign transactions but may have limited permissions restricted to specific actions, portfolios, or assets, and can be removed by the primary key."}),"\n",(0,s.jsxs)(i.p,{children:["For more on Polymesh's public/private key cryptography, please see:",(0,s.jsx)(i.br,{}),"\n",(0,s.jsx)(i.a,{href:"https://docs.substrate.io/learn/cryptography/",children:"https://docs.substrate.io/learn/cryptography/"})]}),"\n",(0,s.jsx)(i.h2,{id:"key-types",children:"Key Types"}),"\n",(0,s.jsx)(i.p,{children:"Polymesh supports three key types:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Public/Private key pairs"}),"\n",(0,s.jsx)(i.li,{children:"MultiSigs"}),"\n",(0,s.jsx)(i.li,{children:"Smart Contracts"}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"Polymesh treats each key type consistently (e.g., for permissions)."}),"\n",(0,s.jsx)(i.h3,{id:"publicprivate-key-pairs",children:"Public/Private Key Pairs"}),"\n",(0,s.jsxs)(i.p,{children:["Polymesh uses public-key cryptography with the ",(0,s.jsx)(i.a,{href:"https://docs.substrate.io/learn/cryptography/#elliptic-curve",children:"Ed25519 curve"}),", supporting Ed25519, SR25519, or ECDSA keys."]}),"\n",(0,s.jsx)(i.h3,{id:"multisigs",children:"MultiSigs"}),"\n",(0,s.jsxs)(i.p,{children:["A MultiSig is a single key controlled by one or more people. An ",(0,s.jsx)(i.em,{children:"n"})," of ",(0,s.jsx)(i.em,{children:"m"})," MultiSig requires ",(0,s.jsx)(i.em,{children:"n"})," of its ",(0,s.jsx)(i.em,{children:"m"})," members to agree on a transaction before that transaction can be submitted by the MultiSig."]}),"\n",(0,s.jsxs)(i.p,{children:["For a walkthrough on how to create a new MultiSig, please see the ",(0,s.jsx)(i.a,{href:"/identity/advanced/multisig",children:"MultiSig Walkthrough"}),"."]}),"\n",(0,s.jsx)(i.p,{children:"Attributes include:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["MultiSig Signers (",(0,s.jsx)(i.code,{children:"multisig::multiSigSigners"}),"): Keys authorized to sign."]}),"\n",(0,s.jsxs)(i.li,{children:["MultiSig Approvals Required (",(0,s.jsx)(i.code,{children:"multisig::multiSigSignsRequired"}),"): Minimum signatures required."]}),"\n",(0,s.jsxs)(i.li,{children:["Admin Identity (",(0,s.jsx)(i.code,{children:"multisig::adminDid"}),"): Optional identity to manage the MultiSig."]}),"\n",(0,s.jsxs)(i.li,{children:["Paying Identity (",(0,s.jsx)(i.code,{children:"multisig::payingDid"}),"): Optional identity to cover MultiSig fees."]}),"\n",(0,s.jsxs)(i.li,{children:["MultiSig Identity (",(0,s.jsx)(i.code,{children:"identity::keyRecords"})," / ",(0,s.jsx)(i.code,{children:"identity::didRecords"}),"): Optional identity which the MultiSig is linked to as primary or secondary."]}),"\n"]}),"\n",(0,s.jsx)(i.h4,{id:"creating-multisigs",children:"Creating MultiSigs"}),"\n",(0,s.jsxs)(i.p,{children:["To create a MultiSig, call ",(0,s.jsx)(i.code,{children:"multisig::createMultisig"}),", specifying the signers and required approvals. The permissions to assign the Multisig key can also optionally be specified."]}),"\n",(0,s.jsx)(i.p,{children:"The new MultiSig will automatically:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Be added to the caller's identity as a secondary key with appropriate permissions."}),"\n",(0,s.jsxs)(i.li,{children:["Have its ",(0,s.jsx)(i.em,{children:"Paying Identity"})," set to the caller's identity."]}),"\n",(0,s.jsxs)(i.li,{children:["Issue ",(0,s.jsx)(i.code,{children:"AddMultiSigSigner"})," authorizations to each of the specified signers."]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["Once created, the specified signers must accept the authorizations issued above before they can interact with the MultiSig. This is done via a call to ",(0,s.jsx)(i.code,{children:"multisig::acceptMultisigSigner"})," by each of the signing keys."]}),"\n",(0,s.jsx)(i.admonition,{type:"note",children:(0,s.jsx)(i.p,{children:"MultiSig signing keys are not permitted to be directly linked to an identity or another MultiSig."})}),"\n",(0,s.jsx)(i.h4,{id:"submitting-transactions",children:"Submitting Transactions"}),"\n",(0,s.jsx)(i.p,{children:"MultiSig signers are indirectly associated with an identity through the MultiSig itself. MultiSig signers cannot send or receive POLYX since they are not directly associated with an identity and cannot directly pay for transactions to create, approve or reject proposals."}),"\n",(0,s.jsxs)(i.p,{children:["The MultiSig must be attached to a valid identity to be able to submit a transaction (excluding transactions to join or leave an identity), and either the MultiSig or its ",(0,s.jsx)(i.em,{children:"Paying Identity"})," must have sufficient funds to pay the transaction fees to create, approve or reject the proposal."]}),"\n",(0,s.jsx)(i.h4,{id:"identity-management",children:"Identity Management"}),"\n",(0,s.jsx)(i.p,{children:"When created, a MultiSig is:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Linked to its creating identity as a secondary key."}),"\n",(0,s.jsxs)(i.li,{children:["Has its ",(0,s.jsx)(i.em,{children:"Paying Identity"})," set to the creating identity."]}),"\n",(0,s.jsxs)(i.li,{children:["Has no ",(0,s.jsx)(i.em,{children:"Admin Identity"})," assigned."]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"These relationships can be amended."}),"\n",(0,s.jsxs)(i.p,{children:["An ",(0,s.jsx)(i.em,{children:"Admin Identity"})," can be assigned via ",(0,s.jsx)(i.code,{children:"multisig::addAdmin"}),", allowing the ",(0,s.jsx)(i.em,{children:"Admin Identity"})," to add/remove signers from the MultiSig (via ",(0,s.jsx)(i.code,{children:"multisig::addMultisigSignersViaAdmin"}),", ",(0,s.jsx)(i.code,{children:"multisig::removeMultisigSignersViaAdmin"}),") and change the number of approvals needed (via ",(0,s.jsx)(i.code,{children:"multisig::changeSigsRequiredViaAdmin"}),"). The primary key of the ",(0,s.jsx)(i.em,{children:"Admin Identity"})," is the only key that can call these transactions."]}),"\n",(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.em,{children:"Admin Identity"})," can be removed either by the ",(0,s.jsx)(i.em,{children:"Admin Identity"})," themselves, or by the MultiSig executing a proposal to remove the ",(0,s.jsx)(i.em,{children:"Admin Identity"}),"."]}),"\n",(0,s.jsx)(i.p,{children:"Modifying signers or the required number of signatures invalidates any pending MultiSig proposals."}),"\n",(0,s.jsx)(i.admonition,{type:"note",children:(0,s.jsxs)(i.p,{children:["As the ",(0,s.jsx)(i.em,{children:"Admin Identity"})," associated with a MultiSig can modify the signers and / or the number of signers required on a MultiSig, invalidating any pending proposals, they can prevent the MultiSig from directly removing the ",(0,s.jsx)(i.em,{children:"Admin Identity"})," on a MultiSig. This is by design to provide a ",(0,s.jsx)(i.em,{children:"Admin Identity"})," with full control over any MultiSig it is administering."]})}),"\n",(0,s.jsxs)(i.p,{children:["A MultiSig can leave and join a new identity, similar to any other key. Changing identity will not update the ",(0,s.jsx)(i.em,{children:"Admin Identity"})," of the MultiSig, this must be amended separately if needed."]}),"\n",(0,s.jsx)(i.p,{children:"To change identity, a MultiSig must:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Receive a ",(0,s.jsx)(i.code,{children:"JoinIdentity"})," authorization from another identity."]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"Then either:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Leave its current identity by executing a proposal of ",(0,s.jsx)(i.code,{children:"identity::leaveIdentityAsKey"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["Create/approve the ",(0,s.jsx)(i.code,{children:"JoinIdentity"})," authorization by a direct call to ",(0,s.jsx)(i.code,{children:"multisig::approveJoinIdentity"})," by the required number of signers."]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"Or:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Create a proposal for an atomic batch of two transactions using ",(0,s.jsx)(i.code,{children:"utility::batch"}),":","\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Leave its current identity by executing ",(0,s.jsx)(i.code,{children:"identity::leaveIdentityAsKey"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["Join its new identity by executing ",(0,s.jsx)(i.code,{children:"identity::joinIdentityAsKey"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["The latter approach is recommended, provided the ",(0,s.jsx)(i.code,{children:"JoinIdentity"})," authorization can be issued before the MultiSig leaves its current identity."]}),"\n",(0,s.jsx)(i.h4,{id:"payment-management",children:"Payment Management"}),"\n",(0,s.jsx)(i.p,{children:"MultiSigs can hold POLYX once linked to an identity. If they are removed from the identity, they can continue to hold funds (as per normal external key behavior), but these funds are locked until the key is reattached to a CDD'ed identity."}),"\n",(0,s.jsxs)(i.p,{children:["A MultiSig may opt to pay for its own transactions (to remove the requirement to keep the primary key of its ",(0,s.jsx)(i.em,{children:"Paying Identity"})," funded with POLYX) via ",(0,s.jsx)(i.code,{children:"multisig::removePayer"}),". This can also be done by the ",(0,s.jsx)(i.em,{children:"Paying Identity"})," via ",(0,s.jsx)(i.code,{children:"multisig::removePayerViaPayer"}),"."]}),"\n",(0,s.jsx)(i.admonition,{type:"note",children:(0,s.jsxs)(i.p,{children:["If removed, a new ",(0,s.jsx)(i.em,{children:"Paying Identity"})," cannot be re-added."]})}),"\n",(0,s.jsx)(i.h3,{id:"smart-contracts",children:"Smart Contracts"}),"\n",(0,s.jsx)(i.p,{children:"While not conventionally considered key types, Smart Contracts are represented by a public address on Polymesh, similar to other key types. Like other keys, smart contracts must be associated with an identity to be able to transact on-chain."}),"\n",(0,s.jsx)(i.p,{children:"Smart contracts allow developers to define custom logic, rules, records, and functions. They are vital tools for automating complex processes, facilitating decentralized applications, and expanding the network's capabilities. Like other keys, Smart Contracts can hold POLYX tokens but require interaction with external keys to initiate actions. These contracts seamlessly integrate with Polymesh through chain extensions, granting access to blockchain data and functionalities, thus supporting diverse decentralized applications and use cases."}),"\n",(0,s.jsx)(i.h2,{id:"permissions",children:"Permissions"}),"\n",(0,s.jsx)(i.p,{children:"Permissions have three granular levels:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Assets"}),": Restricts interaction to specific assets."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Extrinsics"}),": Restricts access to certain on-chain actions."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Portfolios"}),": Restricts access transacting with assets in specific portfolios under the identity or under the custody/control of that identity."]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"The access of a particular key is determined by the intersection of these categories. It is possible to grant a key full access to any or all of these categories."}),"\n",(0,s.jsx)(i.p,{children:"Not all on-chain actions are associated with an asset or a portfolio (e.g., staking). For such actions, these permission types are not checked."}),"\n",(0,s.jsx)(i.h2,{id:"child-identities",children:"Child Identities"}),"\n",(0,s.jsx)(i.p,{children:"As described above all keys and identities must be linked to a CDD Provider assigned CDD claim to be allowed to transact on chain. However, In some scenarios, existing identities may benefit from the ability to create additional child identities independently (i.e., without involving a CDD provider)."}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{alt:"Child Identity Diagram",src:t(43265).A+"",width:"1320",height:"1650"})}),"\n",(0,s.jsx)(i.p,{children:"Possible use cases for child identities include:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Smart Contract Isolation"}),": Creating a separate identity for a smart contract to protect user funds managed by the contract, ensuring it operates independently of the deployer's identity."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Enhanced Security Structure"}),': Using child identities as "hot wallets" while keeping the parent identity as a "cold wallet" to secure assets. Since assets are held at the identity level, this structure allows for separate identities for hot/cold wallet functions.']}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Organizational Hierarchy"}),": Structuring an organization with child identities, such as assigning separate identities to different departments or subsidiaries."]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:'Polymesh allows any "parent" identity (created through a CDD provider) to create additional child identities. These child identities inherit the CDD claim of the parent, instead of receiving an explicit CDD claim from a CDD provider on the child DID. It is through the parents CDD claim that the child identity is permitted to transact.'}),"\n",(0,s.jsxs)(i.p,{children:["To create a child identity, the ",(0,s.jsx)(i.code,{children:"identity::create_child_identity"})," extrinsic is available, along with corresponding SDK and RESTful API methods."]}),"\n",(0,s.jsx)(i.p,{children:"Once created, a child identity is assigned its unique DID and can hold claims and assets like any other identity. However, child identities cannot create further child identities (no recursion). They only inherit the CDD status from the parent, while any other compliance claims must be attached directly to the child identity."}),"\n",(0,s.jsx)(i.p,{children:"If desired, a child identity can also be unlinked from its parent. In that case, it will no longer inherit CDD status from the parent's claim and must obtain its own CDD claim from a CDD provider."})]})}function h(e={}){const{wrapper:i}={...(0,a.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},63412:(e,i,t)=>{t.d(i,{A:()=>n});const n=t.p+"assets/images/Identity-09ca6ccde69eb6c5e5b6382524883a17.png"},43265:(e,i,t)=>{t.d(i,{A:()=>n});const n=t.p+"assets/images/child_identities-859d5ce5cef29c8160a9ff341fc638dd.png"},28453:(e,i,t)=>{t.d(i,{R:()=>r,x:()=>d});var n=t(96540);const s={},a=n.createContext(s);function r(e){const i=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function d(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),n.createElement(a.Provider,{value:i},e.children)}}}]);