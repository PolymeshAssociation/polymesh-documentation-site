"use strict";(self.webpackChunkpolymesh_developer_documentation=self.webpackChunkpolymesh_developer_documentation||[]).push([[74596],{28453:(e,t,o)=>{o.d(t,{R:()=>r,x:()=>a});var n=o(96540);const i={},s=n.createContext(i);function r(e){const t=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),n.createElement(s.Provider,{value:t},e.children)}},63280:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"core-concepts/portfolios/custody-management","title":"Custody Management","description":"Custody Management","source":"@site/docs/200-core-concepts/080-portfolios/custody.md","sourceDirName":"200-core-concepts/080-portfolios","slug":"/portfolios/custody","permalink":"/polymesh-documentation-site/portfolios/custody","draft":false,"unlisted":false,"editUrl":"https://github.com/PolymeshAssociation/polymesh-documentation-site/edit/develop/docs/200-core-concepts/080-portfolios/custody.md","tags":[{"inline":true,"label":"portfolios","permalink":"/polymesh-documentation-site/tags/portfolios"},{"inline":true,"label":"custody","permalink":"/polymesh-documentation-site/tags/custody"}],"version":"current","frontMatter":{"title":"Custody Management","description":"Custody Management","id":"custody-management","slug":"/portfolios/custody","sidebar_label":"Custody Management","tags":["portfolios","custody"]},"sidebar":"docs","previous":{"title":"Portfolios","permalink":"/polymesh-documentation-site/portfolios"},"next":{"title":"Governance","permalink":"/polymesh-documentation-site/governance"}}');var i=o(74848),s=o(28453);const r={title:"Custody Management",description:"Custody Management",id:"custody-management",slug:"/portfolios/custody",sidebar_label:"Custody Management",tags:["portfolios","custody"]},a=void 0,l={},d=[{value:"Overview",id:"overview",level:2},{value:"Custody Models",id:"custody-models",level:2},{value:"Self-Custody",id:"self-custody",level:3},{value:"Custody with Full Control and Ownership",id:"custody-with-full-control-and-ownership",level:3},{value:"Omnibus",id:"omnibus",level:4},{value:"Omnibus Segregation",id:"omnibus-segregation",level:4},{value:"Custody with Beneficial Interest Separated from Asset Control",id:"custody-with-beneficial-interest-separated-from-asset-control",level:3},{value:"Sub-Identities (Full Segregation)",id:"sub-identities-full-segregation",level:3},{value:"Custody Portfolios",id:"custody-portfolios",level:2},{value:"Custody Portfolio Lifecycle",id:"custody-portfolio-lifecycle",level:3},{value:"Approach 1: Creating New Portfolios with Custody",id:"approach-1-creating-new-portfolios-with-custody",level:4},{value:"1. Allowing an identity to create Portfolios",id:"1-allowing-an-identity-to-create-portfolios",level:5},{value:"2. Creating a Custody Portfolio",id:"2-creating-a-custody-portfolio",level:5},{value:"Approach 2: Assigning Custody of Existing Portfolios",id:"approach-2-assigning-custody-of-existing-portfolios",level:4},{value:"1. Requesting Portfolio Custody",id:"1-requesting-portfolio-custody",level:5},{value:"2. Accepting Portfolio Custody",id:"2-accepting-portfolio-custody",level:5},{value:"3. Ending Portfolio Custody",id:"3-ending-portfolio-custody",level:4},{value:"Querying Custody Information",id:"querying-custody-information",level:2}];function c(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",h5:"h5",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(t.p,{children:["Polymesh is designed to support several common custody models, including the ability to assign custodianship of a portfolio to another ",(0,i.jsx)(t.a,{href:"/identity",children:"identity"}),". This separates beneficial ownership (which always stays with the beneficiary's identity for corporate actions) from custodial control, where another entity manages the ",(0,i.jsx)(t.a,{href:"/core/assets",children:"assets"})," on behalf of the beneficiary."]}),"\n",(0,i.jsx)(t.p,{children:"When control of a portfolio is assigned, the custodian can:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Affirm, reject, and revoke affirmation"})," for ",(0,i.jsx)(t.a,{href:"/settlement",children:"settlement"})," instructions involving the portfolio."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Move assets between portfolios under the same DID"}),": The custodian can transfer assets between ",(0,i.jsx)(t.a,{href:"/portfolios",children:"portfolios"})," belonging to the same identity, as long as they have custody of the source portfolio."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Pre-approve or remove pre-approval for asset receipt"})," for the portfolio."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Leave the custody relationship"})," (return custody to the owner)."]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Restrictions:"})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"The custodian cannot move assets to portfolios under a different DID; only between portfolios of the same owner."}),"\n",(0,i.jsx)(t.li,{children:"The custodian cannot delete the portfolio."}),"\n",(0,i.jsx)(t.li,{children:"The custodian cannot rename the portfolio."}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"Any assets in a portfolio which has been assigned a custodian are managed exclusively by that custodian, and include any new assets which are transferred into the portfolio."}),"\n",(0,i.jsx)(t.p,{children:"A portfolio can only be assigned to a single custodian at a time."}),"\n",(0,i.jsx)(t.h2,{id:"custody-models",children:"Custody Models"}),"\n",(0,i.jsx)(t.p,{children:"Polymesh supports a range of custody models to meet diverse requirements, allowing users and institutions to select the approach that best fits their regulatory, operational, and business needs."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Use cases include:"})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Self-custody:"})," The asset owner manages their own assets and portfolios directly, retaining both beneficial and operational control."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Omnibus custody:"})," A custodian pools assets for multiple clients in a single portfolio, with client balances tracked off-chain."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Segregated custody (omnibus segregation):"})," A custodian manages assets for multiple clients, but each client\u2019s assets are held in separate on-chain portfolios under the custodian\u2019s identity, providing on-chain segregation."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Delegated control (portfolio custody):"})," The owner retains beneficial ownership, but delegates management and ",(0,i.jsx)(t.a,{href:"/settlement",children:"settlement"})," responsibilities for a specific portfolio to a custodian, who cannot move assets outside the owner\u2019s identity."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Sub-identity (full segregation):"})," The custodian creates a separate on-chain ",(0,i.jsx)(t.a,{href:"/identity/advanced/child",children:"identity"})," for each client, providing the highest level of on-chain segregation and regulatory clarity."]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"These models can be combined or tailored to meet specific regulatory or operational requirements."}),"\n",(0,i.jsx)(t.h3,{id:"self-custody",children:"Self-Custody"}),"\n",(0,i.jsx)(t.p,{children:"In the self-custody model, the asset owner retains full control and beneficial ownership of their assets and portfolios. All actions, including transfers, settlements, and corporate actions, are performed directly by the owner or their authorized keys."}),"\n",(0,i.jsx)(t.admonition,{type:"note",children:(0,i.jsx)(t.p,{children:"Some regulated assets or jurisdictions may require the use of an approved custodian, and self-custody may not be permitted for all asset types. Always check the compliance requirements for each asset."})}),"\n",(0,i.jsx)(t.h3,{id:"custody-with-full-control-and-ownership",children:"Custody with Full Control and Ownership"}),"\n",(0,i.jsx)(t.p,{children:"In the full control and ownership model, assets are transferred from the user's identity to the custodian's identity. On Polymesh, this means the custodian becomes both the owner of record and beneficial owner of the securities on-chain."}),"\n",(0,i.jsxs)(t.p,{children:["The custodian has full rights over these assets within the protocol, including the ability to transfer, manage, or dispose of them as they see fit. For all ",(0,i.jsx)(t.a,{href:"/corporate-actions",children:"corporate actions"}),", the custodian is recognized as the beneficial owner."]}),"\n",(0,i.jsxs)(t.p,{children:["To hold and manage these assets, the custodian must possess the necessary ",(0,i.jsx)(t.a,{href:"/compliance",children:"compliance claims"})," and satisfy all regulatory requirements. The custodian is also responsible for ensuring that any underlying compliance obligations for their clients are met according to the issuer's rules."]}),"\n",(0,i.jsx)(t.h4,{id:"omnibus",children:"Omnibus"}),"\n",(0,i.jsx)(t.p,{children:"Custodian creates one omnibus portfolio and holds all clients assets in a single portfolio within the corresponding identity."}),"\n",(0,i.jsx)(t.mermaid,{value:'flowchart TD\n    CustodianID["Custodian Identity"]\n    OmnibusPortfolio["Omnibus Portfolio<br/>(all client assets pooled)"]\n    Client1["Client 1"]\n    Client2["Client 2"]\n    Client3["Client 3"]\n    AssetA["ASSET A"]\n    AssetB["ASSET B"]\n    AssetC["ASSET C"]\n    CustodianID --\x3e|Owns| OmnibusPortfolio\n    Client1 -.->|"Deposits Assets"| OmnibusPortfolio\n    Client2 -.->|"Deposits Assets"| OmnibusPortfolio\n    Client3 -.->|"Deposits Assets"| OmnibusPortfolio\n    OmnibusPortfolio --\x3e AssetA\n    OmnibusPortfolio --\x3e AssetB\n    OmnibusPortfolio --\x3e AssetC\n    Note1["Individual client balances tracked off-chain"]\n    OmnibusPortfolio --- Note1'}),"\n",(0,i.jsxs)(t.p,{children:["While this model is very simple and easy to manage, it lacks many useful features available in the more sophisticated approaches described below. As all assets are held in a single portfolio, the custodian must maintain an off-chain ledger of client balances and transactions. Since asset movements do not use the Polymesh ",(0,i.jsx)(t.a,{href:"/settlement",children:"settlement engine"}),", on-chain compliance rules are not enforced. This means that the custodian must ensure that all asset movements are compliant with the rules of the issuer and any other regulatory requirements."]}),"\n",(0,i.jsx)(t.h4,{id:"omnibus-segregation",children:"Omnibus Segregation"}),"\n",(0,i.jsx)(t.p,{children:"Custodian has a single identity and segregates client assets by portfolio (aka sub-accounts)."}),"\n",(0,i.jsx)(t.mermaid,{value:'flowchart TD\n CustodianID["Custodian Identity"]\n PrimaryKey["Primary Key<br/>(Full Access)"]\n SecKey1["Secondary Key<br/>(Portfolio 1 Assets)"]\n SecKey2["Secondary Key<br/>(Portfolio 2/3 Assets)"]\n    Client1["Client 1"]\n    Client2["Client 2"]\n    Client3["Client 3"]\n Portfolio1["Portfolio 1<br/>Client 1 Assets"]\n Portfolio2["Portfolio 2<br/>Client 2 Assets"]\n Portfolio3["Portfolio 3<br/>Client 3 Assets"]\n AssetA1["ASSET A"]\n AssetA2["ASSET A"]\n AssetA3["ASSET A"]\n AssetB1["ASSET B"]\n AssetB2["ASSET B"]\n AssetB3["ASSET C"]\n PrimaryKey --\x3e CustodianID\n SecKey1 --\x3e CustodianID\n SecKey2 --\x3e CustodianID\n CustodianID ---\x3e Portfolio1\n CustodianID ---\x3e Portfolio2\n CustodianID ---\x3e Portfolio3\n    Client1 -.->|"Deposits Assets"| Portfolio1\n    Client2 -.->|"Deposits Assets"| Portfolio2\n    Client3 -.->|"Deposits Assets"| Portfolio3\n Portfolio1 --\x3e AssetA1\n Portfolio1 --\x3e AssetB1\n Portfolio2 --\x3e AssetA2\n Portfolio2 --\x3e AssetB2\n Portfolio3 --\x3e AssetA3\n Portfolio3 --\x3e AssetB3'}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Key features of Omnibus Segregation:"})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Each client's assets are held in a separate on-chain portfolio under the custodian's identity, providing clear on-chain segregation and transparency."}),"\n",(0,i.jsx)(t.li,{children:"The custodian can permission secondary keys at the portfolio level, allowing flexible and secure access control for each client's assets."}),"\n",(0,i.jsx)(t.li,{children:"The primary key of the custodian can access all client portfolios, while secondary keys can be restricted to specific portfolios or assets as needed."}),"\n",(0,i.jsx)(t.li,{children:"Asset movements between portfolios are always recorded on-chain and can be audited, but as these movements remain under a single on-chain identity, Polymesh protocol compliance rules are not automatically enforced for these internal transfers. The custodian is responsible for ensuring compliance and maintaining accurate records."}),"\n",(0,i.jsx)(t.li,{children:"The custodian identity is recorded as the beneficial owner for all assets in these portfolios, including for corporate actions."}),"\n",(0,i.jsx)(t.li,{children:"The custodian is responsible for maintaining compliance for all assets held in these portfolios, including any regulatory or issuer requirements."}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"This model is often used by custodians, asset managers, or broker-dealers who want to provide clients with segregated accounts while retaining operational efficiency and compliance oversight. It can also be extended by creating separate identities for large clients or business units, further enhancing segregation and control."}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h3,{id:"custody-with-beneficial-interest-separated-from-asset-control",children:"Custody with Beneficial Interest Separated from Asset Control"}),"\n",(0,i.jsxs)(t.p,{children:["In this model, the user retains full beneficial ownership of their assets (for example, for ",(0,i.jsx)(t.a,{href:"/corporate-actions/distributions",children:"dividend payments"})," and ",(0,i.jsx)(t.a,{href:"/corporate-actions",children:"corporate actions"}),"), but delegates control of a specific portfolio to a third-party custodian. The custodian can affirm or reject settlements, move assets between portfolios under the same DID, and manage day-to-day operations."]}),"\n",(0,i.jsxs)(t.p,{children:["Polymesh provides dedicated custody functionality for on-chain ",(0,i.jsx)(t.a,{href:"/settlement",children:"settlement"}),", enabling this separation of control and ownership. This approach is particularly useful for regulated entities or investors who must retain beneficial ownership for compliance or reporting purposes, but wish to delegate operational responsibilities."]}),"\n",(0,i.jsxs)(t.p,{children:["The custodian can also invest (on behalf of their client) in any ",(0,i.jsx)(t.a,{href:"/sto",children:"STOs"})," using funds from the client\u2019s portfolio that they are a custodian of."]}),"\n",(0,i.jsx)(t.admonition,{type:"note",children:(0,i.jsxs)(t.p,{children:["This model follows a similar approach to ERC-2258 as described in the ",(0,i.jsx)(t.a,{href:"https://www.oecd.org/content/dam/oecd/en/publications/reports/2021/03/regulatory-approaches-to-the-tokenisation-of-assets_da7ae482/aea35466-en.pdf",children:"Regulatory Approaches to the Tokenisation of Assets"}),"."]})}),"\n",(0,i.jsx)(t.mermaid,{value:'flowchart TD\n Investor1["Investor 1 Identity"]\n Custodian["Custodian Identity"]\n Client2["Investor 2 Identity"]\n PrimKey1["Investor 1 Keys"]\n PrimKey2["Custodian Keys"]\n PrimKey3["Investor 2 Keys"]\n Portfolio1["Investor 1 Portfolio<br/>(Control Assigned)"]\n Portfolio2["Investor 2 Portfolio<br/>(Control Assigned)"]\n AssetA["ASSET A"]\n AssetB["ASSET B"]\n AssetC["ASSET C"]\n AssetD["ASSET D"]\n PrimKey1 --\x3e Investor1\n Investor1 --\x3e|Owns| Portfolio1\n Portfolio1 --\x3e AssetA\n Portfolio1 --\x3e AssetB\n PrimKey2 --\x3e Custodian\n Custodian -.->|"Can Transfer<br/>and Affirm"| Portfolio1\n Custodian -.->|"Can Transfer<br/>and Affirm"| Portfolio2\n PrimKey3 --\x3e Client2\n Client2 --\x3e|Owns| Portfolio2\n Portfolio2 --\x3e AssetC\n Portfolio2 --\x3e AssetD'}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Key features of Portfolio Custody:"})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Separation of ownership and control"}),": The investor retains beneficial ownership while delegating operational control to a custodian. The investor's ownership is reflected in corporate actions, dividends, and regulatory reporting."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Security model"}),": The custodian has exclusive control over the assigned portfolio, and only the custodian can relinquish this control. This security design protects assets from unauthorized access, even if an investor's keys are compromised."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Compliance enforcement"}),": Unlike the omnibus models, all asset transfers between investors must go through the Polymesh settlement engine and are fully subject to on-chain compliance rules."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Portfolio management"}),": Each portfolio can only have one custodian at a time, but an investor can create multiple portfolios with different custodians for different purposes or asset types."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Operational restrictions"}),": Custodians can only move assets between portfolios under the same identity (DID), cannot delete portfolios, and cannot transfer assets to external identities without using the settlement engine."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Regulatory considerations"}),": This model is often preferred by regulated entities that must maintain beneficial ownership for compliance reasons but want to delegate operational responsibilities to qualified custodians."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Transparent governance"}),": For voting and other governance activities, the beneficial owner (investor) participates directly, maintaining a clear separation between custody services and ownership rights."]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"sub-identities-full-segregation",children:"Sub-Identities (Full Segregation)"}),"\n",(0,i.jsxs)(t.p,{children:["In this model, the custodian creates a separate on-chain identity (",(0,i.jsx)(t.a,{href:"/identity/advanced/child",children:"sub-identity"}),") for each client. Each sub-identity inherits the CDD claim from the parent (custodian) identity but otherwise behaves as a fully independent identity. This allows for complete on-chain segregation of client assets, with each sub-identity requiring its own unique key to transact. The parent (custodian) cannot directly access the assets of the sub-identity. Only those with access to keys associated with the sub identity can transact on behalf of the sub-identity. Each sub-identity can hold its own portfolios, assets, and claims."]}),"\n",(0,i.jsxs)(t.p,{children:["This approach is ideal for custodians or organizations that require strict asset segregation and regulatory clarity, as each client's assets are managed under a distinct on-chain identity. It does however require a more complex ",(0,i.jsx)(t.a,{href:"/identity/advanced/secondary-keys",children:"key management"})," strategy and ",(0,i.jsx)(t.a,{href:"/polyx",children:"POLYX"})," management for transaction fees."]}),"\n",(0,i.jsx)(t.mermaid,{value:'flowchart TD\n    CustodianID["Custodian Identity (Parent)"]\n    SubID1["Sub-Identity 1 (Client 1)"]\n    SubID2["Sub-Identity 2 (Client 2)"]\n    SubID3["Sub-Identity 3 (Client 3)"]\n    Key1["Key for Sub-Identity 1<br/>(Custodian Managed)"]\n    Key2["Key for Sub-Identity 2<br/>(Custodian Managed)"]\n    Key3["Key for Sub-Identity 3<br/>(Custodian Managed)"]\n    Portfolio1["Sub ID 1 Portfolio"]\n    Portfolio2["Sub ID 2 Portfolio"]\n    Portfolio3["Sub ID 3 Portfolio"]\n    AssetA["ASSET A"]\n    AssetB["ASSET B"]\n    AssetC["ASSET C"]\n    AssetA1["ASSET A"]\n    AssetB1["ASSET B"]\n    AssetC1["ASSET C"]\n\n    CustodianID ---\x3e SubID1\n    CustodianID ---\x3e SubID2\n    CustodianID ---\x3e SubID3\n    SubID1 -.->|"Inherits CDD claim"| CustodianID\n    SubID2 -.->|"Inherits CDD claim"| CustodianID\n    SubID3 -.->|"Inherits CDD claim"| CustodianID\n    Key1 --\x3e SubID1\n    Key2 --\x3e SubID2\n    Key3 --\x3e SubID3\n    SubID1 --\x3e Portfolio1\n    SubID2 --\x3e Portfolio2\n    SubID3 --\x3e Portfolio3\n    Portfolio1 --\x3e AssetA\n    Portfolio1 --\x3e AssetB\n    Portfolio2 --\x3e AssetB1\n    Portfolio2 --\x3e AssetC\n    Portfolio3 --\x3e AssetA1\n    Portfolio3 --\x3e AssetC1'}),"\n",(0,i.jsx)(t.p,{children:"In this structure, each sub-identity is fully independent for asset management, compliance, and key control, while benefiting from the parent identity's CDD claim. This is the most robust model for on-chain segregation of client assets."}),"\n",(0,i.jsx)(t.h2,{id:"custody-portfolios",children:"Custody Portfolios"}),"\n",(0,i.jsx)(t.p,{children:"Creating custody portfolios on Polymesh allows asset owners to delegate the management of specific portfolios to third-party custodians, while maintaining beneficial ownership. This is particularly useful for regulated entities and institutions needing to separate asset control from ownership.\nThe custodian receives exclusive rights to manage the portfolio, including transferring assets."}),"\n",(0,i.jsx)(t.h3,{id:"custody-portfolio-lifecycle",children:"Custody Portfolio Lifecycle"}),"\n",(0,i.jsx)(t.p,{children:"There are two approaches to establishing portfolio custody in Polymesh:"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Creating a new portfolio with a custodian"})," - The custodian creates a new portfolio that will be owned by the client but immediately under the custodian's control"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Assigning custody of an existing portfolio"})," - The portfolio owner initiates an ",(0,i.jsx)(t.a,{href:"/authorizations",children:"authorization request"})," to transfer custody of an existing portfolio to a custodian"]}),"\n"]}),"\n",(0,i.jsx)(t.h4,{id:"approach-1-creating-new-portfolios-with-custody",children:"Approach 1: Creating New Portfolios with Custody"}),"\n",(0,i.jsx)(t.h5,{id:"1-allowing-an-identity-to-create-portfolios",children:"1. Allowing an identity to create Portfolios"}),"\n",(0,i.jsxs)(t.p,{children:["An identity can be permitted to create portfolios by calling ",(0,i.jsx)(t.code,{children:"portfolio::allow_identity_to_create_portfolios"})," and entering the DID of the permitted identity.\nThis is particularly useful for institutional or custody models, where, for example, a custodian or service provider needs to create and manage portfolios on behalf of clients, but the beneficial ownership remains with the client's identity. This permits the custodian to call ",(0,i.jsx)(t.code,{children:"createCustodyPortfolio"})," by passing the portfolio owner's identity."]}),"\n",(0,i.jsxs)(t.p,{children:["This function can be revoked by calling ",(0,i.jsx)(t.code,{children:"revoke_create_portfolios_permission"})," by entering the permissioned identity."]}),"\n",(0,i.jsx)(t.h5,{id:"2-creating-a-custody-portfolio",children:"2. Creating a Custody Portfolio"}),"\n",(0,i.jsxs)(t.p,{children:["The permissioned custodian can then create a custodial portfolio by calling ",(0,i.jsx)(t.code,{children:"portfolio::create_custody_portfolio"})," with the following parameters:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"portfolio_owner_id"}),": The DID that will own the new portfolio."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"portfolio_name"}),": The name of the custody portfolio."]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"The transaction results in a new numbered portfolio being created under the owner's identity. The portfolio is owned by the specified identity but is immediately under the custody of the caller (the custodian)."}),"\n",(0,i.jsx)(t.h4,{id:"approach-2-assigning-custody-of-existing-portfolios",children:"Approach 2: Assigning Custody of Existing Portfolios"}),"\n",(0,i.jsxs)(t.p,{children:["For existing portfolios, you can transfer custody through the ",(0,i.jsx)(t.a,{href:"/authorizations",children:"authorization process"}),":"]}),"\n",(0,i.jsx)(t.h5,{id:"1-requesting-portfolio-custody",children:"1. Requesting Portfolio Custody"}),"\n",(0,i.jsxs)(t.p,{children:["The portfolio owner initiates a custody request through the authorization framework by calling ",(0,i.jsx)(t.code,{children:"identity::add_authorization"})," with the authorization type ",(0,i.jsx)(t.code,{children:"PortfolioCustody"}),", the target identity that will receive custody rights, the portfolio ID that will be placed under custody, and an optional expiry time."]}),"\n",(0,i.jsxs)(t.p,{children:["When submitted, this creates a pending ",(0,i.jsx)(t.a,{href:"/authorizations",children:"authorization request"})," with a unique ID that the custodian can view and accept."]}),"\n",(0,i.jsx)(t.h5,{id:"2-accepting-portfolio-custody",children:"2. Accepting Portfolio Custody"}),"\n",(0,i.jsxs)(t.p,{children:["The target custodian can accept the custody request by calling ",(0,i.jsx)(t.code,{children:"portfolio::accept_portfolio_custody"})," with the ",(0,i.jsx)(t.a,{href:"/authorizations",children:"authorization ID"}),"."]}),"\n",(0,i.jsx)(t.p,{children:"Upon acceptance, the custodian immediately gains custody rights over the specified portfolio. The portfolio owner retains beneficial ownership but cannot manage assets until custody is relinquished."}),"\n",(0,i.jsx)(t.h4,{id:"3-ending-portfolio-custody",children:"3. Ending Portfolio Custody"}),"\n",(0,i.jsxs)(t.p,{children:["If a custodian no longer wishes to manage the portfolio or cannot fulfill their duties, they can relinquish their custodian rights to a portfolio by calling ",(0,i.jsx)(t.code,{children:"portfolio::quit_portfolio_custody"}),"."]}),"\n",(0,i.jsx)(t.p,{children:"This function immediately ends the custodian's management rights over the portfolio, and the portfolio owner regains full control and management authority. Note that only the current custodian of a portfolio can invoke this function. The portfolio owner cannot unilaterally revoke custody."}),"\n",(0,i.jsx)(t.h2,{id:"querying-custody-information",children:"Querying Custody Information"}),"\n",(0,i.jsx)(t.p,{children:"Portfolio owners and custodians can access custody information through several query methods:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"portfolio::portfolioCustodian"})," to query the custodian of a particular portfolio."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"portfolio::allowedCustodians"})," shows the custodians allowed to create and take custody of portfolios on an owner's behalf."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"portfolio::portfoliosInCustody"}),": to track all the ",(0,i.jsx)(t.a,{href:"/portfolios",children:"portfolios"})," in custody of a particular ",(0,i.jsx)(t.a,{href:"/identity",children:"identity"}),"."]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);