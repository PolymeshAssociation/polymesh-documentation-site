<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-core-concepts/settlement/settlement-mediators" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Settlement Mediators | Polymesh Documentation Portal</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://polymeshassociation.github.io/polymesh-documentation-site/settlement/mediators/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Settlement Mediators | Polymesh Documentation Portal"><meta data-rh="true" name="description" content="Third-party validation and approval in the settlement process"><meta data-rh="true" property="og:description" content="Third-party validation and approval in the settlement process"><link data-rh="true" rel="icon" href="/polymesh-documentation-site/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://polymeshassociation.github.io/polymesh-documentation-site/settlement/mediators/"><link data-rh="true" rel="alternate" href="https://polymeshassociation.github.io/polymesh-documentation-site/settlement/mediators/" hreflang="en"><link data-rh="true" rel="alternate" href="https://polymeshassociation.github.io/polymesh-documentation-site/settlement/mediators/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://K25SRS7O1D-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Core Concepts","item":"https://polymeshassociation.github.io/polymesh-documentation-site/core-concepts"},{"@type":"ListItem","position":2,"name":"Settlement","item":"https://polymeshassociation.github.io/polymesh-documentation-site/settlement"},{"@type":"ListItem","position":3,"name":"Settlement Mediators","item":"https://polymeshassociation.github.io/polymesh-documentation-site/settlement/mediators"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="Polymesh Documentation Portal" href="/polymesh-documentation-site/opensearch.xml"><link rel="stylesheet" href="/polymesh-documentation-site/assets/css/styles.7b6e484f.css">
<script src="/polymesh-documentation-site/assets/js/runtime~main.4434ba0d.js" defer="defer"></script>
<script src="/polymesh-documentation-site/assets/js/main.97158419.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/polymesh-documentation-site/"><div class="navbar__logo"><img src="/polymesh-documentation-site/img/logo.svg" alt="Polymesh Logo" class="themedComponent_mlkZ themedComponent--light_NVdE" width="150px"><img src="/polymesh-documentation-site/img/logo.svg" alt="Polymesh Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" width="150px"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/polymesh-documentation-site/sdk-docs/">SDK API Docs</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/polymesh-documentation-site/sdk-docs/">v28.0.x</a><ul class="dropdown__menu"><li class=""><div>SDK Docs Version</div></li><li><a class="dropdown__link" href="/polymesh-documentation-site/sdk-docs/">v28.0.x</a></li><li><a class="dropdown__link" href="/polymesh-documentation-site/sdk-docs/v27.7.x/">v27.7.x</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Rust Docs</a><ul class="dropdown__menu"><li><a href="https://docs.polymesh.live/polymesh" target="_blank" rel="noopener noreferrer" class="dropdown__link">Polymesh Runtime<svg width="12" height="12" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://private-docs.polymesh.live/polymesh_private" target="_blank" rel="noopener noreferrer" class="dropdown__link">Polymesh Private Runtime<svg width="12" height="12" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://docs.rs/polymesh-api/latest/polymesh_api/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Polymesh Client API<svg width="12" height="12" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a href="https://docs.rs/polymesh-ink/latest/polymesh_ink/" target="_blank" rel="noopener noreferrer" class="dropdown__link">ink! Contracts API<svg width="12" height="12" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/PolymeshAssociation" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/polymesh-documentation-site/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/polymesh-documentation-site/getting-started/">Getting Started</a><button aria-label="Expand sidebar category &#x27;Getting Started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/polymesh-documentation-site/core-concepts/">Core Concepts</a><button aria-label="Collapse sidebar category &#x27;Core Concepts&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/polymesh-documentation-site/architecture/">Architecture</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/polymesh-documentation-site/polyx/">POLYX</a><button aria-label="Expand sidebar category &#x27;POLYX&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/polymesh-documentation-site/identity/">Identity</a><button aria-label="Expand sidebar category &#x27;Identity&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/polymesh-documentation-site/core/assets/">Assets</a><button aria-label="Expand sidebar category &#x27;Assets&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/polymesh-documentation-site/compliance/">Compliance</a><button aria-label="Expand sidebar category &#x27;Compliance&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/polymesh-documentation-site/settlement/">Settlement</a><button aria-label="Collapse sidebar category &#x27;Settlement&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/polymesh-documentation-site/settlement/venues/">Trading Venues</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/polymesh-documentation-site/settlement/mediators/">Settlement Mediators</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/polymesh-documentation-site/settlement/off-chain/">Off-Chain Settlement</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/polymesh-documentation-site/core-concepts/settlement/settlement-diagrams/">Settlement Sequence Diagrams</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/polymesh-documentation-site/corporate-actions/">Corporate Actions</a><button aria-label="Expand sidebar category &#x27;Corporate Actions&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/polymesh-documentation-site/portfolios/">Portfolios</a><button aria-label="Expand sidebar category &#x27;Portfolios&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/polymesh-documentation-site/governance/">Governance</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/polymesh-documentation-site/polymesh-private/">Polymesh Private</a><button aria-label="Expand sidebar category &#x27;Polymesh Private&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/polymesh-documentation-site/glossary/">Glossary</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/polymesh-documentation-site/development/">Developer Resources</a><button aria-label="Expand sidebar category &#x27;Developer Resources&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/polymesh-documentation-site/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/polymesh-documentation-site/core-concepts/"><span>Core Concepts</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/polymesh-documentation-site/settlement/"><span>Settlement</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Settlement Mediators</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Settlement Mediators</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>Settlement mediators in Polymesh are entities that must affirm settlement instructions before they can be executed. They provide an optional additional layer of control and validation in the settlement process, enabling scenarios where third-party verification or approval is required before transfers can execute on chain. Mediators can represent transfer agents, smart contracts, or other entities that need to validate transactions before they occur.</p>
<p>Mediator affirmations can have an optional expiry after which it will no longer be valid requiring the mediator to reaffirm the instruction before it can execute. Mediators can also withdraw their affirmation or reject/cancel an instruction entirely.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mediator-types-and-scope">Mediator Types and Scope<a href="#mediator-types-and-scope" class="hash-link" aria-label="Direct link to Mediator Types and Scope" title="Direct link to Mediator Types and Scope">​</a></h2>
<p>Mediation can be enforced at two levels:</p>
<ul>
<li><strong>Asset Level</strong>: Required for all settlements involving specific assets (set by asset issuers)</li>
<li><strong>Instruction Level</strong>: Required for specific settlement instructions (chosen during instruction creation)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="asset-level-mediators">Asset-Level Mediators<a href="#asset-level-mediators" class="hash-link" aria-label="Direct link to Asset-Level Mediators" title="Direct link to Asset-Level Mediators">​</a></h3>
<p>Asset issuers can designate mediators that must approve all transfers of their assets, ensuring consistent validation criteria regardless of who creates settlement instructions.</p>
<p><strong>Management</strong>: Asset mediators are controlled through <code>asset::add_mandatory_mediator</code> and <code>asset::remove_mandatory_mediator</code> transactions.</p>
<p><strong>Behavior</strong>:</p>
<ul>
<li>All settlement instructions involving the asset require mediator approval</li>
<li>Multiple mediators can be assigned to a single asset</li>
<li>Applies automatically to any instruction involving the asset</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="instruction-level-mediators">Instruction-Level Mediators<a href="#instruction-level-mediators" class="hash-link" aria-label="Direct link to Instruction-Level Mediators" title="Direct link to Instruction-Level Mediators">​</a></h3>
<p>Settlement instructions can specify additional mediators beyond any asset-level requirements, allowing flexible validation for specific transaction needs.</p>
<p><strong>Scope</strong>: These mediators are instruction-specific and must approve in addition to any asset-level mediators.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mediator-functions-and-use-cases">Mediator Functions and Use Cases<a href="#mediator-functions-and-use-cases" class="hash-link" aria-label="Direct link to Mediator Functions and Use Cases" title="Direct link to Mediator Functions and Use Cases">​</a></h2>
<p>Mediators enable various validation scenarios:</p>
<ul>
<li><strong>Transfer Agent Oversight</strong>: Ensuring proper validation by authorized agents</li>
<li><strong>Regulatory Compliance</strong>: Third-party compliance verification before execution</li>
<li><strong>Smart Contract Validation</strong>: Programmatic verification of settlement conditions</li>
<li><strong>Multi-Party Authorization</strong>: Complex workflows requiring multiple approvals</li>
<li><strong>Cross-Chain Coordination</strong>: Validating external blockchain conditions before settlement</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mediator-actions-and-workflow">Mediator Actions and Workflow<a href="#mediator-actions-and-workflow" class="hash-link" aria-label="Direct link to Mediator Actions and Workflow" title="Direct link to Mediator Actions and Workflow">​</a></h2>
<p>Mediators have several control mechanisms during the settlement process:</p>
<p><strong>Required Actions:</strong></p>
<ul>
<li><code>settlement::affirm_instruction_as_mediator</code> - Provide affirmation (with optional expiry)</li>
<li>Must affirm before instruction can execute (like all other parties)</li>
</ul>
<p><strong>Optional Control Actions:</strong></p>
<ul>
<li><code>settlement::withdraw_affirmation_as_mediator</code> - Remove previous affirmation</li>
<li><code>settlement::reject_instruction_as_mediator</code> - Cancel instruction entirely</li>
<li><code>settlement::lock_instruction</code> - Lock instruction for execution (SettleAfterLock only)</li>
</ul>
<p><strong>Affirmation Rules:</strong></p>
<ul>
<li>Mediators can set expiry times for their affirmations</li>
<li>Expired affirmations become invalid and require renewal</li>
<li>All mediators (asset-level and instruction-level) must affirm before execution</li>
<li>If a mediator is also a counterparty, they need separate affirmations for both roles</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="settlement-locking-settleafterlock-instructions">Settlement Locking (SettleAfterLock Instructions)<a href="#settlement-locking-settleafterlock-instructions" class="hash-link" aria-label="Direct link to Settlement Locking (SettleAfterLock Instructions)" title="Direct link to Settlement Locking (SettleAfterLock Instructions)">​</a></h2>
<p>Settlement locking is a specialized workflow designed for scenarios where additional validation or cross-chain/off-chain coordination is required before final settlement. This feature prevents parties from withdrawing affirmations or rejecting instructions once the locking process begins.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-cases">Use Cases<a href="#use-cases" class="hash-link" aria-label="Direct link to Use Cases" title="Direct link to Use Cases">​</a></h3>
<p>Settlement locking is particularly valuable for:</p>
<ul>
<li><strong>Cross-Chain Settlements</strong>: Ensuring Polymesh instructions cannot be cancelled after corresponding actions have been initiated on other blockchains</li>
<li><strong>Off-Chain Coordination</strong>: Preventing instruction cancellation after external systems have begun processing related transactions</li>
<li><strong>Multi-Stage Workflows</strong>: Securing instructions that depend on sequential external validations or approvals</li>
<li><strong>Regulatory Escrow</strong>: Creating time-locked periods where instructions cannot be modified during compliance verification</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-settlement-locking-works">How Settlement Locking Works<a href="#how-settlement-locking-works" class="hash-link" aria-label="Direct link to How Settlement Locking Works" title="Direct link to How Settlement Locking Works">​</a></h3>
<ol>
<li>
<p><strong>Instruction Creation</strong>: An instruction must be created with <code>SettlementType::SettleAfterLock</code></p>
</li>
<li>
<p><strong>Standard Affirmation Process</strong>: All parties and mediators affirm the instruction normally</p>
</li>
<li>
<p><strong>Locking Phase</strong>: A mediator calls <code>settlement::lock_instruction</code> to lock the instruction for execution</p>
<ul>
<li><strong>Required Parameters</strong>: The call requires both the <code>instruction_id</code> to specify which instruction to lock and a <code>weightLimit</code> parameter</li>
<li><strong>Weight Mechanism</strong>: Weight in Substrate chains acts similar to gas in Ethereum - it measures computational cost and prevents infinite loops. If the weight limit is too low, the transaction will fail before execution begins</li>
<li><strong>Runtime API Available</strong>: Use the <code>settlement::lock_instruction_weight</code> runtime API to get the correct weight for a specific instruction and ensure proper fee calculation</li>
<li><strong>Comprehensive validation occurs</strong>: All settlement conditions are validated including compliance rules, mediator affirmation expiries, asset availability, and venue permissions</li>
<li><strong>Execution guarantee</strong>: Once successfully locked, execution by any mediator cannot fail - all potential failure conditions have been pre-validated</li>
<li>Assets are locked and the instruction status changes to <code>LockedForExecution</code></li>
<li>A timestamp is recorded for the locking period</li>
</ul>
</li>
<li>
<p><strong>Protected Period</strong>: During the lock period:</p>
<ul>
<li>Parties cannot withdraw affirmations or reject the instruction</li>
<li>The instruction is protected from cancellation</li>
<li>Assets remain locked until settlement or lock expiry</li>
</ul>
</li>
<li>
<p><strong>Final Settlement</strong>: The instruction can be settled using standard settlement methods during the lock period</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lock-period-and-expiry">Lock Period and Expiry<a href="#lock-period-and-expiry" class="hash-link" aria-label="Direct link to Lock Period and Expiry" title="Direct link to Lock Period and Expiry">​</a></h3>
<ul>
<li><strong>Maximum Lock Period</strong>:<!-- -->
<ul>
<li><strong>Mainnet and Testnet</strong>: 24 hours (86,400,000 milliseconds)</li>
<li><strong>Development chains</strong>: 24 minutes (1,440,000 milliseconds)</li>
</ul>
</li>
<li><strong>Lock Expiry Behavior</strong>: When the lock period expires:<!-- -->
<ul>
<li>The instruction status remains <code>LockedForExecution</code></li>
<li><strong>Execution is blocked</strong> unless a mediator calls <code>lock_instruction</code> again to reset the timestamp</li>
<li><strong>Assets remain locked</strong> and are NOT automatically released</li>
<li><strong>Withdrawal of affirmations remains blocked</strong> (status is still <code>LockedForExecution</code>)</li>
<li>Only rejection by any valid party is allowed after expiry</li>
<li>Assets are only released by execution, rejection, or successful re-locking followed by execution</li>
</ul>
</li>
<li><strong>Lock Extension</strong>: Mediators can extend the lock period by calling <code>lock_instruction</code> again, which updates the timestamp and resets the lock period</li>
<li><strong>Timestamp Tracking</strong>: The system tracks when each instruction was locked for period validation</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="requirements-and-restrictions">Requirements and Restrictions<a href="#requirements-and-restrictions" class="hash-link" aria-label="Direct link to Requirements and Restrictions" title="Direct link to Requirements and Restrictions">​</a></h3>
<p><strong>Who Can Lock Instructions:</strong></p>
<p>Only designated mediators can call <code>settlement::lock_instruction</code>. Mediators can be designated:</p>
<ul>
<li>At the instruction level (specified during creation)</li>
<li>At the asset level (mandatory mediators for involved assets)</li>
</ul>
<p><strong>Technical Requirements:</strong></p>
<ul>
<li>Instruction must use <code>SettlementType::SettleAfterLock</code></li>
<li>All standard settlement conditions must be met (affirmations, compliance, etc.)</li>
<li>Caller must be an authorized mediator</li>
<li>Already locked instructions can be re-locked to extend the period</li>
<li><strong>Required Parameters</strong>:<!-- -->
<ul>
<li><code>instruction_id</code>: The ID of the instruction to lock</li>
<li><code>weightLimit</code>: Weight allocation with <code>refTime</code> (computational time) and <code>proofSize</code> (storage proof size) values. Use the <code>settlement::lock_instruction_weight</code> runtime api call to determine the correct weight</li>
</ul>
</li>
</ul>
<p><strong>Compliance and Validation:</strong></p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Critical Design Feature</div><div class="admonitionContent_BuS1"><p>When locking an instruction, <strong>all compliance rules, mediator affirmation expiries, asset availability, and settlement conditions are validated</strong>. Once successfully locked, execution by any mediator is guaranteed to succeed - no compliance or validation failures can occur during execution.</p><p>This design ensures that cross-chain coordinators can rely on Polymesh settlement completion once locking succeeds, enabling atomic cross-chain operations.</p></div></div>
<p><strong>During Lock Period:</strong></p>
<ul>
<li><strong>Execution</strong>: Only mediators can execute the instruction during the lock period</li>
<li><strong>Rejection</strong>: Only mediators can reject the instruction during the lock period (unless lock period has expired)</li>
<li><strong>Withdrawal of affirmations</strong>: Prevented for all parties during lock period</li>
<li><strong>Affirmation</strong>: Standard affirmation rules apply</li>
<li><strong>Multiple mediators</strong>: All mediators have equal powers to execute, reject, or extend locks</li>
</ul>
<p><strong>After Lock Expiry:</strong></p>
<ul>
<li><strong>Execution</strong>: Blocked unless a mediator calls <code>lock_instruction</code> again to reset timestamp</li>
<li><strong>Rejection</strong>: Any valid party can reject the instruction</li>
<li><strong>Withdrawal of affirmations</strong>: Still blocked (instruction status remains <code>LockedForExecution</code>)</li>
<li><strong>Re-locking</strong>: Mediators can reset the lock period by calling <code>lock_instruction</code> again</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cross-chain-settlement-use-cases">Cross-Chain Settlement Use Cases<a href="#cross-chain-settlement-use-cases" class="hash-link" aria-label="Direct link to Cross-Chain Settlement Use Cases" title="Direct link to Cross-Chain Settlement Use Cases">​</a></h3>
<p>SettleAfterLock instructions are primarily designed for <strong>cross-chain settlement coordination</strong>. Common scenarios include:</p>
<p><strong>Cross-Chain Service Providers:</strong></p>
<ol>
<li>User creates SettleAfterLock instruction on Polymesh with a cross-chain service as a mediator</li>
<li>Cross-chain service validates both chains are ready</li>
<li>Service affirms the instruction and calls lock_instruction when cross-chain conditions are met</li>
<li>Settlement can be executed by any mediator during the lock period</li>
<li>If cross-chain coordination fails, the service can reject during lock period</li>
</ol>
<p><strong>Multi-Chain Atomic Swaps:</strong></p>
<ul>
<li>Coordinate simultaneous settlement across multiple blockchain networks</li>
<li>Ensure atomic execution or failure across all participating chains</li>
<li>Prevent partial settlement when cross-chain conditions aren&#x27;t met</li>
</ul>
<p><strong>External System Integration:</strong></p>
<ul>
<li>Allow external systems to validate off-chain conditions before settlement</li>
<li>Coordinate with traditional financial systems or other blockchain networks</li>
<li>Implement complex business logic that requires external validation</li>
</ul>
<p><strong>Instructions Without Explicit Mediators:</strong></p>
<p>SettleAfterLock instructions require mediators to be lockable. Without mediators at either instruction or asset level, the instruction behaves like standard <code>SettleManual</code> settlement. This ensures:</p>
<ul>
<li>Cross-chain coordination requires explicit mediator designation</li>
<li>Asset-level policies can enforce locking requirements</li>
<li>Instructions default to standard settlement when no coordination is needed</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Dual Role Requirements</div><div class="admonitionContent_BuS1"><p>If a mediator is also a counterparty, they must provide separate affirmations:</p><ul>
<li>Mediator affirmation: <code>affirm_instruction_as_mediator</code></li>
<li>Counterparty affirmation: Standard instruction affirmation for their leg(s)</li>
</ul><p>Both are required before the instruction can settle.</p></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Mediators provide flexible transfer control and validation mechanisms. They integrate with other Polymesh features like venues and compliance rules to create comprehensive settlement governance frameworks.</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/polymesh-documentation-site/tags/settlement/">settlement</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/polymesh-documentation-site/tags/mediators/">mediators</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/PolymeshAssociation/polymesh-documentation-site/edit/develop/docs/200-core-concepts/060-settlement/020-mediators.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/polymesh-documentation-site/settlement/venues/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Trading Venues</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/polymesh-documentation-site/settlement/off-chain/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Off-Chain Settlement</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#mediator-types-and-scope" class="table-of-contents__link toc-highlight">Mediator Types and Scope</a><ul><li><a href="#asset-level-mediators" class="table-of-contents__link toc-highlight">Asset-Level Mediators</a></li><li><a href="#instruction-level-mediators" class="table-of-contents__link toc-highlight">Instruction-Level Mediators</a></li></ul></li><li><a href="#mediator-functions-and-use-cases" class="table-of-contents__link toc-highlight">Mediator Functions and Use Cases</a></li><li><a href="#mediator-actions-and-workflow" class="table-of-contents__link toc-highlight">Mediator Actions and Workflow</a></li><li><a href="#settlement-locking-settleafterlock-instructions" class="table-of-contents__link toc-highlight">Settlement Locking (SettleAfterLock Instructions)</a><ul><li><a href="#use-cases" class="table-of-contents__link toc-highlight">Use Cases</a></li><li><a href="#how-settlement-locking-works" class="table-of-contents__link toc-highlight">How Settlement Locking Works</a></li><li><a href="#lock-period-and-expiry" class="table-of-contents__link toc-highlight">Lock Period and Expiry</a></li><li><a href="#requirements-and-restrictions" class="table-of-contents__link toc-highlight">Requirements and Restrictions</a></li><li><a href="#cross-chain-settlement-use-cases" class="table-of-contents__link toc-highlight">Cross-Chain Settlement Use Cases</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/9TdzKbKgSU" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://twitter.com/PolymeshNetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/polymeshnetwork/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/c/PolymeshNetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://polymesh.network/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Polymesh Website<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://polymesh.network/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/PolymeshAssociation" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://polymesh.network/contact-us" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/polymesh-documentation-site/img/logo.svg" alt="Polymesh Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width="150px"><img src="/polymesh-documentation-site/img/logo.svg" alt="Polymesh Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width="150px"></div><div class="footer__copyright">Copyright © 2025 Polymesh Association, All Rights Reserved</div></div></div></footer></div>
</body>
</html>