<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-polymesh-docs docs-version-current docs-doc-page docs-doc-id-primitives/smart-contracts" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Smart Contracts | Polymesh Documentation Portal</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://polymeshassociation.github.io/polymesh-documentation-site/polymesh-docs/primitives/smart-contracts/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-polymesh-docs-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-polymesh-docs-current"><meta data-rh="true" property="og:title" content="Smart Contracts | Polymesh Documentation Portal"><link data-rh="true" rel="icon" href="/polymesh-documentation-site/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://polymeshassociation.github.io/polymesh-documentation-site/polymesh-docs/primitives/smart-contracts/"><link data-rh="true" rel="alternate" href="https://polymeshassociation.github.io/polymesh-documentation-site/polymesh-docs/primitives/smart-contracts/" hreflang="en"><link data-rh="true" rel="alternate" href="https://polymeshassociation.github.io/polymesh-documentation-site/polymesh-docs/primitives/smart-contracts/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://K25SRS7O1D-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Polymesh Documentation Portal" href="/polymesh-documentation-site/opensearch.xml">



<link rel="preconnect" href="https://matomo.polymesh.network/">
<script>var _paq=window._paq=window._paq||[];_paq.push(["setRequestMethod","POST"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),_paq.push(["enableHeartBeatTimer"]),function(){var e="https://matomo.polymesh.network/";_paq.push(["setRequestMethod","POST"]),_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","3"]);var t=document,a=t.createElement("script"),p=t.getElementsByTagName("script")[0];a.type="text/javascript",a.async=!0,a.src=e+"matomo.js",p.parentNode.insertBefore(a,p)}()</script><link rel="stylesheet" href="/polymesh-documentation-site/assets/css/styles.6becf59a.css">
<script src="/polymesh-documentation-site/assets/js/runtime~main.6a9f3b07.js" defer="defer"></script>
<script src="/polymesh-documentation-site/assets/js/main.f710ca69.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/polymesh-documentation-site/"><div class="navbar__logo"><img src="/polymesh-documentation-site/img/logo.svg" alt="Polymesh Logo" class="themedComponent_mlkZ themedComponent--light_NVdE" width="150px"><img src="/polymesh-documentation-site/img/logo.svg" alt="Polymesh Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" width="150px"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/polymesh-documentation-site/docs/">Developer Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/polymesh-documentation-site/polymesh-docs/">Polymesh Docs</a><a class="navbar__item navbar__link" href="/polymesh-documentation-site/sdk-docs/">SDK API Docs</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/polymesh-documentation-site/sdk-docs/">25.1.x</a><ul class="dropdown__menu"><li><div>SDK Docs Version</div></li><li><a class="dropdown__link" href="/polymesh-documentation-site/sdk-docs/26.0.0-beta.2/">26.0.0-beta.2</a></li><li><a class="dropdown__link" href="/polymesh-documentation-site/sdk-docs/">25.1.x</a></li><li><a class="dropdown__link" href="/polymesh-documentation-site/sdk-docs/24.7.x/">24.7.x</a></li><li><a class="dropdown__link" href="/polymesh-documentation-site/sdk-docs/24.6.x/">24.6.x</a></li><li><a class="dropdown__link" href="/polymesh-documentation-site/sdk-docs/23.2.x/">23.2.x</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Rust Docs</a><ul class="dropdown__menu"><li><a href="https://docs.polymesh.live/polymesh" target="_blank" rel="noopener noreferrer" class="dropdown__link">Polymesh Runtime<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://private-docs.polymesh.live/polymesh_private" target="_blank" rel="noopener noreferrer" class="dropdown__link">Polymesh Private Runtime<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://docs.rs/polymesh-api/latest/polymesh_api/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Polymesh Client API<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://docs.rs/polymesh-ink/latest/polymesh_ink/" target="_blank" rel="noopener noreferrer" class="dropdown__link">ink! Contracts API<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/PolymeshAssociation" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/polymesh-documentation-site/polymesh-docs/">Polymesh Documentation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/polymesh-documentation-site/polymesh-docs/network/architecture/">Network</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/polymesh-documentation-site/polymesh-docs/primitives/assets/">Primitives</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/polymesh-documentation-site/polymesh-docs/primitives/assets/">Fungible Assets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/polymesh-documentation-site/polymesh-docs/primitives/nfts/">Non-Fungible Tokens</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/polymesh-documentation-site/polymesh-docs/primitives/settlement/">Settlement</a><button aria-label="Expand sidebar category &#x27;Settlement&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/polymesh-documentation-site/polymesh-docs/primitives/authorisations/">Authorisations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/polymesh-documentation-site/polymesh-docs/primitives/cdd/">Customer Due Diligence</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/polymesh-documentation-site/polymesh-docs/primitives/compliance/">Compliance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/polymesh-documentation-site/polymesh-docs/primitives/corporate-actions/">Corporate Actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/polymesh-documentation-site/polymesh-docs/primitives/identity/">Identity</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/polymesh-documentation-site/polymesh-docs/primitives/multisig/">MultiSig Walkthrough</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/polymesh-documentation-site/polymesh-docs/primitives/portfolios-custody/">Portfolios and Custody</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/polymesh-documentation-site/polymesh-docs/primitives/smart-contracts/">Smart Contracts</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/polymesh-documentation-site/polymesh-docs/polymesh-private/">Polymesh Private</a><button aria-label="Collapse sidebar category &#x27;Polymesh Private&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/polymesh-documentation-site/polymesh-docs/polymesh-private/confidential-assets/">Confidential Assets</a><button aria-label="Expand sidebar category &#x27;Confidential Assets&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/polymesh-documentation-site/polymesh-docs/polymesh-private/tooling/">Developer Tooling</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/polymesh-documentation-site/polymesh-docs/polymesh-private/tutorials/walkthrough-confidential-assets-rest-api/">Tutorials</a></div></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/polymesh-documentation-site/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Primitives</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Smart Contracts</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Smart Contracts</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>Polymesh aims to incorporate all of the general functionality needed to issue and manage tokenised securities at its native layer.</p>
<p>The native layer of Polymesh consists of a number of modules, each associated with a number of possible transactions (API) to facilitate this. This includes modules to manage identity and associated attestations / claims, as well as issue, distribute and settle tokenised securities.</p>
<p>However, in addition to this general business logic encoded in the native layer of Polymesh, that does not require smart contracts to work with, Polymesh has support for smart contracts that are deployed on top of this native logic where needed.</p>
<p>For example, a business may wish to deploy some form of DEX on top of Polymesh, that uses the native custody and settlement functionality, but defines additional business logic on top of this to manage deposits, swaps and withdrawals.</p>
<p>Alternatively it may be that a custodian wishes to enforce additional logic on top of the native custody logic provided (for example to allow a user to unilaterally exit the custodial relationship) - this can also be managed via a smart contract that acts as a primary or secondary key attached to the identity that has custody.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ink-and-tooling">Ink! and Tooling<a href="#ink-and-tooling" class="hash-link" aria-label="Direct link to Ink! and Tooling" title="Direct link to Ink! and Tooling">​</a></h2>
<p>Polymesh smart contracts use the Substrate Ink! language - more details on this can be found at:
<a href="https://use.ink/" target="_blank" rel="noopener noreferrer">https://use.ink/</a>
which covers the basic approaches to managing code and storage in smart contracts.</p>
<p>The Polymesh App, has a dedicated Contracts tab found at:
<a href="https://mainnet-app.polymesh.network/#/contracts" target="_blank" rel="noopener noreferrer">https://mainnet-app.polymesh.network/#/contracts</a>
<a href="https://testnet-app.polymesh.live/#/contracts" target="_blank" rel="noopener noreferrer">https://testnet-app.polymesh.live/#/contracts</a>
<a href="https://staging-app.polymesh.dev/#/contracts" target="_blank" rel="noopener noreferrer">https://staging-app.polymesh.dev/#/contracts</a>
which provides a simple UI to upload, deploy and call smart contracts.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="contract-ownership">Contract Ownership<a href="#contract-ownership" class="hash-link" aria-label="Direct link to Contract Ownership" title="Direct link to Contract Ownership">​</a></h2>
<p>Contracts can be deployed either directly from code, or by referencing code that has been previously uploaded to the chain, via its hash.</p>
<p>Contracts are attached to identities as keys in Polymesh. When a contract interaction triggers a call to the native Polymesh layer (for example to interact with issued assets or act as a custodian to a users portfolio) it will do so through the DID of the identity to which it is attached, regardless of what key initiated the contract interaction.</p>
<p>When instantiating a contract, you can choose to:</p>
<ul>
<li>attach the new contract as a secondary key to your identity (by default with empty permissions)</li>
<li>generate a new Child Identity and attach the new contract as the primary key of this identity</li>
</ul>
<p>This establishes a provenance for every smart contract (via a link to an Identity) whilst still allowing fine-grained control over the role and permissions of the smart contract.</p>
<p>Only keys which are attached to identities with a valid CDD claim are allowed to interact with smart contracts via the <code>Contracts::call</code> extrinsic, and pay for these transactions like any other. The smart contract itself must also be attached to an identity with a valid CDD call, otherwise the transaction will fail.</p>
<p>For example, a contract that represents a non-custodial DEX may be best deployed as a primary key on its own (child) identity, so that no other key (e.g. primary key on the same identity) has the ability to detach the smart contract from its identity thus rendering it uncallable.</p>
<p>Alternatively if you wanted to allow someone to update asset documentation with some bespoke logic (e.g. time delay) you could deploy a smart contract representing this bespoke logic, callable by your documentor, with the contract acting as a secondary key on your identity, with limited permissions to the asset documentation extrinsics.</p>
<p>If the smart contract includes logic that calls into the native Polymesh layer, it is important to rememeber that these calls will be interpreted by Polymesh as originating with the identity to which the smart contract is attached, not the identity of the key which initiated the transaction via <code>Contracts::call</code>. This allows smart contracts to express powerful functionality, taking direct ownership over assets and other roles, whilst having the flexibility to allow managed access to outside callers (through delegating that management to logic implemented inside the smart contract).</p>
<p>For example, a custodian may attach a smart contract as a secondary key, with the smart contract exposing an API that allows the owner of a custodied portfolio to request the smart contract (via its attached custodian identity) that the portfolio be uncustodied.</p>
<p>Note that it is possible to have a smart contract be the primary key of a parent identity (rather than a child identity when it is deployed as such) - this can be achieved by including logic in the smart contract to accept a primary key rotation authorisation. In a similar fashion a smart contract that is a primary key, could allow additional secondary keys to be added to its identity by encoding appropriate logic that issues these authorisations in the smart contract.</p>
<p><img decoding="async" loading="lazy" alt="Smart Contract Diagram" src="/polymesh-documentation-site/assets/images/smart_contract_keys-28a076d85943c35658402b05734bb5b9.png" width="2976" height="1905" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-native-polymesh-functionality">Using Native Polymesh Functionality<a href="#using-native-polymesh-functionality" class="hash-link" aria-label="Direct link to Using Native Polymesh Functionality" title="Direct link to Using Native Polymesh Functionality">​</a></h2>
<p>It&#x27;s important that smart contracts can interact with native Polymesh logic, specifically by reading storage (e.g. to determine the holders of an asset issued on the native layer) and calling extrinsics (e.g. to accept authorisations, or execute settlements).</p>
<p>Through these interactions with native logic, and because smart contracts are attached as keys to identities in Polymesh, a smart contract can control, or mediate the control of, any assets, roles (e.g. external agents / custody), attestation issuance or so on.</p>
<p>Polymesh smart contracts can interact with native Polymesh logic in powerful and different ways.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="whitelist">Whitelist<a href="#whitelist" class="hash-link" aria-label="Direct link to Whitelist" title="Direct link to Whitelist">​</a></h3>
<p>Polymesh is designed to allow smart contracts interact with its native layer. However in order to introduce this powerful functionality responsibly and cautiously there is a whitelist of allowed extrinsics that can be called from smart contracts, maintained by the chains governance layer.</p>
<p>This whitelist (index of module and extrinsic) can be found in chain storage at <code>polymeshContracts::callRuntimeWhitelist</code>.</p>
<p>Please raise via our developer channels on Discord any requests to whitelist additional extrinsics and they&#x27;ll be reviewed.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="chain-extensions">Chain Extensions<a href="#chain-extensions" class="hash-link" aria-label="Direct link to Chain Extensions" title="Direct link to Chain Extensions">​</a></h3>
<p>Substrate defines a generic approach called Chain Extensions which allows the runtime to define certain custom features that can be used by smart contracts. The Polymesh Chain Extension logic can be found at:
<a href="https://github.com/PolymeshAssociation/Polymesh/blob/develop/pallets/contracts/src/chain_extension.rs" target="_blank" rel="noopener noreferrer">https://github.com/PolymeshAssociation/Polymesh/blob/develop/pallets/contracts/src/chain_extension.rs</a></p>
<p>Any chain extension can be called directly by a smart contract, and this is useful for example to efficiently return the DID associated with a key.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">Self::env().extension().get_key_did(acc)?</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  .map(|did| did.into())</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  .ok_or(Error::MissingIdentity)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="polymesh-api">Polymesh API<a href="#polymesh-api" class="hash-link" aria-label="Direct link to Polymesh API" title="Direct link to Polymesh API">​</a></h3>
<p>The Polymesh chain extensions also include the ability to read native chain storage and call any extrinsic (if permitted by the whitelist). To ease working with these generic extensions (<code>read_storage</code>, <code>call_runtime_with_error</code>) the Polymesh API Ink Client can be used.</p>
<p>The Polymesh API library provides a simple and readable API, alongside Polymesh types, to facilitate easy interactions with Polymesh, and can be built for several clients, including Ink! based smart contracts.</p>
<p>For example, executing a manual settlement instruction in a smart contract may involve getting the next instruction identifier:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">// Get the next instruction id.</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">let instruction_id = api</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  .query()</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  .settlement()</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  .instruction_counter()</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  .map(|v| v.into())?;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>and then executing a corresponding manual settlement instruction:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">  api.call()</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  .settlement()</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  .execute_manual_instruction(</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      instruction_id,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      1,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      None</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  .submit()?;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>api.query()</code> and <code>api.call()</code> hooks provide easy ways to query and call into the native Polymesh layer, with the API also providing the necessary types to manage parameters and returned data, alongside any errors.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="upgradable-polymesh-ink-contract">Upgradable Polymesh Ink Contract<a href="#upgradable-polymesh-ink-contract" class="hash-link" aria-label="Direct link to Upgradable Polymesh Ink Contract" title="Direct link to Upgradable Polymesh Ink Contract">​</a></h3>
<p>One concern with (possibly immutable) smart contracts calling into the Polymesh native layer is that Polymesh allows this native functionality (logic and storage) to be upgraded via chain upgrades. Typically these upgrades are backwards compatable, but in the case of major releases may not be.</p>
<p>To help mitigate this Polymesh provides a proxy contract (Upgradable Polymesh Ink Contract) through which interactions with the native layer can be mediated. This provides a stable interface for smart contracts to interact with, across any breaking Polymesh upgrades.</p>
<p>The Upgradable Polymesh Ink Contract can be found at:
<a href="https://github.com/PolymeshAssociation/Polymesh/tree/develop/contracts/upgradeable-polymesh-ink" target="_blank" rel="noopener noreferrer">https://github.com/PolymeshAssociation/Polymesh/tree/develop/contracts/upgradeable-polymesh-ink</a>
and is a normal Polymesh smart contract, that has an API designed to be called by other smart contracts (rather than directly through the <code>Contracts::call</code> extrinsic).</p>
<p>This contract is maintained by the Polymesh Association, with the intention that if there are breaking changes during an upgrade that mean any of its functionality no longer works, a new fixed version will be deployed and made available ahead of these breaking changes.</p>
<p>It presents a clean API such as:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">let api = PolymeshInk::new()?;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">// Accept portfolio custody and ensure we have custody.</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">let portfolio_id = api.accept_portfolio_custody(auth_id, portfolio)?;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Under the covers, the call to <code>api.accept_portfolio_custody</code> uses a delegate call (<code>ink::env::call::build_call::&lt;ink::env::DefaultEnvironment&gt;().delegate</code>) into the Upgradable Polymesh Ink Contract, to submit (in this case) an extrinsic to accept portfolio custody.</p>
<p>The Upgradable Polymesh Ink Contract uses the Polymesh API extensively to interact with the native Polymesh layer via storage queries and executing extrinsics.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="updating-the-upgradable-polymesh-ink-contract">Updating the Upgradable Polymesh Ink Contract<a href="#updating-the-upgradable-polymesh-ink-contract" class="hash-link" aria-label="Direct link to Updating the Upgradable Polymesh Ink Contract" title="Direct link to Updating the Upgradable Polymesh Ink Contract">​</a></h4>
<p>Polymesh provides dedicated Chain Extensions to allow smart contracts to discover the latest version of the Upgradable Polymesh Ink Contract. These Chain Extensions are used by the API associated with the Upgradable Polymesh Ink Contract to help ensure it is always using the correct underlying logic via the latest contract hash / code.</p>
<p>In particular, from the <code>polymesh-ink</code> crate, using <code>let api = PolymeshInk::new()?;</code> will look up the latest Upgradable Polymesh Ink Contract hash from chain storage (<code>polymeshContracts::currentApiHash</code>) and use this address when dispatching calls to the Upgradable Polymesh Ink Contract via its API.</p>
<p>Since this latest Upgradable Polymesh Ink contract hash may change (for example if a Polymesh upgrade necessitates releasing a new version with updated logic, maintaining the same external API) it is important to either re-instantiate the Polymesh Ink API everytime it is used (when constructed the API checks it is referencing the latest Upgradable Polymesh Ink Contract hash). This is preferred over using the API function <code>check_for_upgrade</code> which will do the same on an already instantiated API object, which is more expensive. In general the <code>PolymeshInk</code> API object should be reused within a single contract call as much as possible, and recreated on each contract call.</p>
<p>The latest hash is maintained via governance, using the chain storage at <code>polymeshContracts::apiNextUpgrade</code> to allow new Upgradable Polymesh Ink Contracts to be deployed ahead of the Polymesh upgrade to which they correspond. Following the upgrade, the next contract which uses an API constructed from this contract will trigger the chain storage (polymeshContracts::currentApiHash`) to be updated as appropriate.</p>
<p>The API of the Upgradable Polymesh Ink Contract includes cover functions to do useful and common actions, and wraps up multiple native Polymesh transactions and chain storage queries as needed.</p>
<p><img decoding="async" loading="lazy" alt="Upgradable Polymesh Ink Contract API" src="/polymesh-documentation-site/assets/images/upgradable_polymesh_ink_contract-d98f4c8b07c6d9d968cccf2b3123f356.png" width="561" height="1353" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="polymesh-contracts-vs-contracts-modules">Polymesh Contracts vs. Contracts Modules<a href="#polymesh-contracts-vs-contracts-modules" class="hash-link" aria-label="Direct link to Polymesh Contracts vs. Contracts Modules" title="Direct link to Polymesh Contracts vs. Contracts Modules">​</a></h2>
<p>Substrate provides a library module called <code>Contracts</code> that presents most functionality needed to interact with smart contracts (e.g. uploading code, instantiating new contracts, calling contracts) - this module has been modified slightly to enforce Polymesh specific rules that a contract must be attached to an identity with a valid CDD claim.</p>
<p>In addition there is a module <code>polymeshContracts</code> which provides an additional layer of Polymesh specific contract functionality. In particular it allows contracts to be deployed with customised permissions as a secondary key, or allow it to be deployed as a primary key (by creating a new child identity under the callers identity, and associating the contract as a primary key of this child identity).</p>
<p>The <code>polymeshContracts</code> module also manages the latest and any upcoming Upgradable Polymesh Ink Contract hashes, as well as the whitelist of extrinsics that can be called by smart contracts.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deterministic-compilation">Deterministic Compilation<a href="#deterministic-compilation" class="hash-link" aria-label="Direct link to Deterministic Compilation" title="Direct link to Deterministic Compilation">​</a></h2>
<p>Smart contracts are compiled to WASM and run via an on-chain WASM VM. WASM compilation is not deterministic out-of-the-box, meaning that two individuals compiling the same smart contract, may end up generating two different WASM blobs, with different code hashes.</p>
<p>This can make verifying the logic of a smart contract hard, as this relies on a user being able to match the hash of the on-chain smart contract when compiling locally (to ensure that the logic on-chain matches expectations).</p>
<p>It is possible to compile smart contracts deterministically, which allows the above verification, either manually or via the contracts tool in SubScan.</p>
<p>To compile deterministicically you can use:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">docker pull quay.io/subscan-explorer/wasm-compile-build:amd64-stable-1.70.0-v3.2.0</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">docker run --rm -it -v .:/builds/contract -v ./target:/target/ quay.io/subscan-explorer/wasm-compile-build:amd64-stable-1.70.0-v3.2.0 cargo contract build --release</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For more details see an example at:
<a href="https://github.com/PolymeshAssociation/Polymesh/blob/develop/contracts/upgradeable-polymesh-ink/README.md#verifiable-build" target="_blank" rel="noopener noreferrer">https://github.com/PolymeshAssociation/Polymesh/blob/develop/contracts/upgradeable-polymesh-ink/README.md#verifiable-build</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="example-case-study">Example Case Study<a href="#example-case-study" class="hash-link" aria-label="Direct link to Example Case Study" title="Direct link to Example Case Study">​</a></h2>
<p>In this case study we&#x27;re going to analyse, compile and deploy a smart contract that wraps POLYX (the transaction payment token of Polymesh) as a Polymesh asset, potentially allowing it to be used in settlement instructions alongside any other Polymesh asset.</p>
<p>The smart contract code can be found at:
<a href="https://github.com/PolymeshAssociation/Polymesh/tree/develop/contracts/wrapped-polyx" target="_blank" rel="noopener noreferrer">https://github.com/PolymeshAssociation/Polymesh/tree/develop/contracts/wrapped-polyx</a></p>
<p>Its README file includes a description of the approach and logic used in this contract. Below we focus on the Polymesh specific interactions using various mechanisms discussed above.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="analysis">Analysis<a href="#analysis" class="hash-link" aria-label="Direct link to Analysis" title="Direct link to Analysis">​</a></h3>
<p>The Wrapped POLYX contract uses the Upgradable Polymesh Ink Contract for its interactions with the Polymesh native layers. It would be possible to do this directly via Chain Extensions, or by using the lower-level Polymesh API, but both of these approaches would be brittle if the underlying Polymesh native layer logic or API were to change during a Polymesh upgrade.</p>
<p>By using the Upgradable Polymesh Ink Contract, this can be avoided, but instead relying on this contract to be updated via governance, in advance of any breaking upgrades, to reflect the new logic, and retain a consistent API.</p>
<p><strong>Direct Polymesh API</strong></p>
<p>The <code>polymesh-api</code> and <code>polymesh-api-ink</code> crates are authored in <a href="https://github.com/PolymeshAssociation/polymesh-api" target="_blank" rel="noopener noreferrer">https://github.com/PolymeshAssociation/polymesh-api</a> and should be imported via:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">polymesh-api = { version = &quot;3.7&quot;, default-features = false, features = [&quot;ink&quot;] }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">polymesh-api-ink = { version = &quot;1.3.0&quot;, default-features = false, features = [&quot;use_call_runtime_with_error&quot;] }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note the feature flag of <code>&quot;ink&quot;</code> which means we&#x27;re using the version of Polymesh API compiled for Ink! contracts.</p>
<p>Whilst the Wrapped POLYX contract does not directly use the Polymesh API (it uses it indirectly via the Upgradable Polymesh Ink Contract that uses it under the covers) it would be possible to use this instead of the Upgradable Polymesh Ink Contract via:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">use polymesh_api::{</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  Api,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  ink::{</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    extension::{PolymeshEnvironment, PolymeshRuntimeErr},</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    basic_types::IdentityId,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    Error as PolymeshError,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  polymesh::types::{</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    polymesh_primitives::{</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      ticker::Ticker,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      asset::{</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        AssetName,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        AssetType,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">};</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">...</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">fn create_wrapped_polyx(&amp;mut self) -&gt; Result&lt;()&gt; {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    let api = Api::new();</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    // Create asset.</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    api.call().asset().create_asset(</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      AssetName(b&quot;Wrapped POLYX&quot;.to_vec()),</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      self.ticker,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      true, // Divisible token.</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      //TODO: Create Other asset type for wrapped tokens</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      AssetType::EquityCommon,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      vec![],</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      None,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      true // Disable Investor uniqueness requirements.</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    ).submit()?;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    // Pause compliance rules to allow transfers.</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    api.call().compliance_manager().pause_asset_compliance(self.ticker).submit()?;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    Ok(())</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This contrasts to the Upgradable Polymesh Ink Contract approach, which uses the API <code>api.asset_create_and_issue</code> that wraps up the asset creation and pausing the compliance rules:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">fn create_wrapped_polyx(&amp;self, api: &amp;PolymeshInk) -&gt; Result&lt;()&gt; {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  api.asset_create_and_issue(</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    AssetName(b&quot;Wrapped POLYX&quot;.to_vec()),</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    self.ticker,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    AssetType::EquityCommon,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    true, // Divisible token.</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    None,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  )?;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  Ok(())</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Upgradable Contract Approach</strong></p>
<p>The Wrapped POLYX contract uses the Upgradable Polymesh Ink Contract via its API.</p>
<p>This is included via the dependency:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">polymesh-ink = { version = &quot;3.2.0&quot;, default-features = false, features = [&quot;as-library&quot;] }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>noting the <code>&quot;as-library&quot;</code> feature.</p>
<p>Within the contract file itself (<code>lib.rs</code>) the package is imported via:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">use polymesh_ink::*;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>and can then be accessed via either direct calls to its immutable API:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">PolymeshInk::get_our_did()?</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>or via its mutable API:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">api.asset_create_and_issue(</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    AssetName(b&quot;Wrapped POLYX&quot;.to_vec()),</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    self.ticker,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    AssetType::EquityCommon,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    true, // Divisible token.</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    None,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">)?;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note that everytime the API is used within an Ink! message we re-initialise it, for example:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">#[ink(message)]</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">/// Accept custody of a portfolio and give the caller some tokens.</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pub fn add_portfolio(&amp;mut self, auth_id: u64, portfolio: PortfolioKind) -&gt; Result&lt;()&gt; {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    self.ensure_initialized()?;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    let api = PolymeshInk::new()?;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    // Accept portfolio custody and ensure we have custody.</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    let portfolio_id = api.accept_portfolio_custody(auth_id, portfolio)?;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This ensures that we&#x27;re always using the most up to date version of the Upgradable Polymesh Ink Contract code, as re-initialising checks whether the hash has been updated (via governance) and always references the latest associated with the current chain version.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="compilation">Compilation<a href="#compilation" class="hash-link" aria-label="Direct link to Compilation" title="Direct link to Compilation">​</a></h3>
<p>To compile the contract you can either compile directly (non-deterministic) via:
<code>cargo contract build --release</code>
or by compiling within docker deterministically via:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">docker pull quay.io/subscan-explorer/wasm-compile-build:amd64-stable-1.70.0-v3.2.0</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">docker run --rm -it -v .:/builds/contract -v ./target:/target/ quay.io/subscan-explorer/wasm-compile-build:amd64-stable-1.70.0-v3.2.0 cargo contract build --release</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Once compiled, you&#x27;ll see various compilation artefacts in the <code>target/ink</code> folder, in particular:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#9CDCFE;background-color:#1E1E1E"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">wrapped_polyx.wasm</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">wrapped_polyx.json</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">wrapped_polyx.contract</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The json file describes the ABI (interface) of the smart contract, the wasm file contains its logic as WASM, and the contract file includes both these pieces of data in a single file.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deployment">Deployment<a href="#deployment" class="hash-link" aria-label="Direct link to Deployment" title="Direct link to Deployment">​</a></h3>
<p>The easiest approach to deploying a smart contract is using the Polymesh App&#x27;s Contract UI, passing in the contract file. For example on the testnet, this would be via the link:
<a href="https://testnet-app.polymesh.live/#/contracts" target="_blank" rel="noopener noreferrer">https://testnet-app.polymesh.live/#/contracts</a></p>
<p><img decoding="async" loading="lazy" alt="Contract Upload" src="/polymesh-documentation-site/assets/images/upload_deploy-f599ccad1e304fa95a72db1c9d2f2725.png" width="624" height="254" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="Contract Deploy" src="/polymesh-documentation-site/assets/images/contract_deploy-d7b835e097c98142e2f2b10d4f609f17.png" width="621" height="285" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="Contract Submit" src="/polymesh-documentation-site/assets/images/sign_submit-5f5e8be092b7db0128356e68fff31492.png" width="750" height="587" class="img_ev3q"></p>
<p>You can note both the constructor parameters (in this case a single parameter which takes the ticker of the wrapped POLYX asset) and the <code>max reftime allowed</code> and <code>max proofsize allowed</code> parameters whose values are automatically calculated by the UI.</p>
<p>This approach is the default, and will deploy the contract as a secondary key, with no permissions, of the identity which is associated with the signing key that submits the transaction.</p>
<p>If you&#x27;d like to either specify a set of secondary permissions, or deploy the contract as a primary key of a child identity, you can use the extrinsics in the <code>polymeshContracts</code> pallet instead.</p>
<p><img decoding="async" loading="lazy" alt="polymeshContracts Extrinsics" src="/polymesh-documentation-site/assets/images/extrinsics-cd8f75d6c9205ef63d922c34ecc4639c.png" width="1351" height="293" class="img_ev3q"></p>
<p>These allow you to deploy a contract (via code or the hash of a previously uploaded contract) and specify either secondary key permissions or that it be deployed as a primary key.</p>
<p>The values such as <code>reftime</code> can be copied over from the calculated values provided by the Contracts tab when deploying using the default approach.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="usage">Usage<a href="#usage" class="hash-link" aria-label="Direct link to Usage" title="Direct link to Usage">​</a></h3>
<p>Once the contract has been deployed, it can be called by any key which is attached to an identity with a valid CDD.</p>
<p>The easiest approach to calling a contract is to use the same Polymesh App&#x27;s Contract UI, which allows you to easily call any function in the smart contract, passing parameters as needed.</p>
<p><img decoding="async" loading="lazy" alt="Wrapped POLYX Contract" src="/polymesh-documentation-site/assets/images/wrapped_polyx-3fe60490068f3032434c6d501ee5f40d.png" width="1188" height="336" class="img_ev3q"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/PolymeshAssociation/polymesh-documentation-site/edit/develop/polymesh-docs/primitives/smart-contracts.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/polymesh-documentation-site/polymesh-docs/primitives/portfolios-custody/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Portfolios and Custody</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/polymesh-documentation-site/polymesh-docs/polymesh-private/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Polymesh Private</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#ink-and-tooling" class="table-of-contents__link toc-highlight">Ink! and Tooling</a></li><li><a href="#contract-ownership" class="table-of-contents__link toc-highlight">Contract Ownership</a></li><li><a href="#using-native-polymesh-functionality" class="table-of-contents__link toc-highlight">Using Native Polymesh Functionality</a><ul><li><a href="#whitelist" class="table-of-contents__link toc-highlight">Whitelist</a></li><li><a href="#chain-extensions" class="table-of-contents__link toc-highlight">Chain Extensions</a></li><li><a href="#polymesh-api" class="table-of-contents__link toc-highlight">Polymesh API</a></li><li><a href="#upgradable-polymesh-ink-contract" class="table-of-contents__link toc-highlight">Upgradable Polymesh Ink Contract</a></li></ul></li><li><a href="#polymesh-contracts-vs-contracts-modules" class="table-of-contents__link toc-highlight">Polymesh Contracts vs. Contracts Modules</a></li><li><a href="#deterministic-compilation" class="table-of-contents__link toc-highlight">Deterministic Compilation</a></li><li><a href="#example-case-study" class="table-of-contents__link toc-highlight">Example Case Study</a><ul><li><a href="#analysis" class="table-of-contents__link toc-highlight">Analysis</a></li><li><a href="#compilation" class="table-of-contents__link toc-highlight">Compilation</a></li><li><a href="#deployment" class="table-of-contents__link toc-highlight">Deployment</a></li><li><a href="#usage" class="table-of-contents__link toc-highlight">Usage</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/polymesh-documentation-site/docs/introduction/">Developer Docs</a></li><li class="footer__item"><a class="footer__link-item" href="/polymesh-documentation-site/polymesh-docs/#network">Network Docs</a></li><li class="footer__item"><a class="footer__link-item" href="/polymesh-documentation-site/polymesh-docs/#primitives">Polymesh Primitive Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/ud2deWAnyt" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/PolymeshNetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/polymeshnetwork/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/c/PolymeshNetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://polymesh.network/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Polymesh Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://polymesh.network/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/PolymeshAssociation" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://polymesh.network/contact-us" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/polymesh-documentation-site/img/logo.svg" alt="Polymesh Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width="150px"><img src="/polymesh-documentation-site/img/logo.svg" alt="Polymesh Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width="150px"></div><div class="footer__copyright">Copyright © 2024 Polymesh Association, All Rights Reserved</div></div></div></footer></div>
</body>
</html>